I"Ä<h1 id="introduction">Introduction</h1>

<p>Our code won‚Äôt always be able to run without issue. So many things can go wrong when running code ‚Äî network connectivity can fail, file system permissions can be wrong, bad inputs can be passed to our scripts. Thankfully, we can normally tell when these types of issues might happen in our code and we can handle them. In this hands-on lab, we‚Äôll add exception handling to an existing script that can run into many of these issues. To feel comfortable completing this lab, you‚Äôll want to know how to perform exception handling in Python (watch the ‚ÄúHandling Exceptions with try, except, else, and finally‚Äù video from the Certified Associate in Python Programming Certification course).</p>

<h1 id="solution">Solution</h1>

<p>To work through the lab, you can either log in via a terminal on your local machine and use a text editor in the terminal, or you can use VS Code in the browser. This lab guide will go through the steps using VS Code in the browser.</p>

<p>In order to use VS Code in the browser, navigate to the public IP address of the workstation server (provided on the lab page) on port 8080 (e.g., http://<PUBLIC_IP>:8080).</PUBLIC_IP></p>

<h1 id="add-exception-handling-around-setting-the-name-variable">Add Exception Handling Around Setting the name Variable</h1>

<ol>
  <li>
    <p>In the menu at the top, click <strong>Terminal</strong> &gt; <strong>New Terminal</strong>.</p>
  </li>
  <li>
    <p>Run <code class="language-plaintext highlighter-rouge">exception_handling.py</code>:</p>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3.7 exception_handling.py
</code></pre></div></div>

<p>We‚Äôll get an index error.</p>

<ol>
  <li>In the menu at the top, click <strong>File</strong> &gt; <strong>Open</strong>.</li>
</ol>

<p>Select exception_handling.py.</p>

<p>Edit the name variable section to match the following:</p>

<p>try:
    name = sys.argv[1]
except IndexError:
    print(‚ÄúError: please provide a name and a repeat count to the script.‚Äù)
    sys.exit(1)</p>

<h1 id="remainder-of-file-omitted">Remainder of file omitted</h1>
<p>Run the script again without any arguments:</p>

<p>python3.7 exception_handling.py
We should see this error message:</p>

<p>Error: please provide a name and a repeat count to the script.
Run the script with an argument of Kevin:</p>

<p>python3.7 exception_handling.py Kevin
We should see this error message:</p>

<p>Traceback (most recent call last):
  File ‚Äúexception_handling.py‚Äù, line 16, in <module>
    repeat_count = int(sys.argv[2])
IndexError: list index out of range
Handle Potential ValueError and IndexError When Setting repeat_count Variable
Edit the repeat_count variable section to match the following:</module></p>

<h1 id="previous-code-omitted">previous code omitted</h1>

<p>try:
    repeat_count = int(sys.argv[2])
except IndexError:
    print(‚ÄúError: please provide a name and a repeat count to the script.‚Äù)
    sys.exit(1)
except ValueError:
    print(‚ÄúError: the repeat count needs to be a number.‚Äù)
    sys.exit(1)</p>

<h1 id="remaining-code-omitted">remaining code omitted</h1>
<p>Run the script with a new argument added:</p>

<p>python3.7 exception_handling.py Kevin bob
We‚Äôll get an error saying the repeat count needs to be a number.</p>

<p>Change bob to 10:</p>

<p>python3.7 exception_handling.py Kevin 10
This time, we‚Äôll get a permissions error.</p>

<p>Handle Potential File IO Errors When Writing to name_repeated.txt
Edit the last four lines in the file to match the following:</p>

<h1 id="previous-code-omitted-1">previous code omitted</h1>

<p>try:
    f = open(‚Äúroot_files/name_repeated.txt‚Äù, ‚Äúw‚Äù)
except (OSError, IOError) as err:
    print(‚ÄúError: unable to write file (‚Äú, err, ‚Äú)‚Äù)
    for i in range(1, repeat_count + 1):
        print(i, ‚Äú-‚Äú, name)
else:
    names = [name + ‚Äú\n‚Äù for i in range(1, repeat_count + 1)]
    f.writelines(names)
    f.close()
Re-run the same command as before:</p>

<p>python3.7 exception_handling.py Kevin 10
We‚Äôll see the same error, but it will also print the list.</p>

<p>Change the owner of the root_files directory:</p>

<p>sudo chown -R cloud_user:cloud_user ~/root_files/
Enter the cloud_user password at the prompt.</p>

<p>List the contents of root_files:</p>

<p>ls -al root_files/
We should see we now own it, so we should be able to write into it.</p>

<p>Re-run the command again:</p>

<p>python3.7 exception_handling.py Kevin 10
We shouldn‚Äôt get any errors.</p>

<p>View the contents of name_repeated.txt:</p>

<p>cat root_files/name_repeated.txt
We should see the name repeated 10 times.</p>

:ET
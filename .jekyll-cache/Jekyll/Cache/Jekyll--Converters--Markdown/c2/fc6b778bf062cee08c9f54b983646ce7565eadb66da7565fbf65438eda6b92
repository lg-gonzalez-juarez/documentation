I"1×<h2 id="simulaciÃ³n-del-motor-dc">SimulaciÃ³n del motor DC</h2>

<h3 id="datos-del-motor">Datos del motor</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%% update 2021</span>
<span class="c1">% Datos dc motor conected separately excited</span>

<span class="nb">clear</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">close</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">clc</span>
<span class="c1">%{</span>
<span class="n">Snom</span> <span class="o">=&gt;</span> <span class="n">rated</span> <span class="nb">power</span>      <span class="p">[</span><span class="n">VA</span><span class="p">]</span>        <span class="n">p</span> <span class="o">=&gt;</span>   <span class="n">pair</span> <span class="n">of</span> <span class="n">poles</span>      
<span class="n">f</span>    <span class="o">=&gt;</span> <span class="n">rated</span> <span class="n">frequency</span>  <span class="p">[</span><span class="n">Hz</span><span class="p">]</span>        
<span class="n">Vll</span>  <span class="o">=&gt;</span> <span class="n">peak</span> <span class="n">value</span> <span class="n">of</span> <span class="n">rated</span> <span class="n">phase</span> <span class="n">voltage</span> <span class="p">[</span><span class="n">V</span><span class="p">]</span> 
<span class="mi">1</span><span class="p">)</span> <span class="n">Datos</span> <span class="n">de</span> <span class="n">placa</span> <span class="n">del</span> <span class="n">motor</span> <span class="n">de</span> <span class="nb">cd</span>
<span class="n">n</span> <span class="o">-&gt;</span> <span class="n">velocidad</span> <span class="p">[</span><span class="n">rpm</span><span class="p">]</span>                        <span class="n">Ua</span> <span class="o">-&gt;</span> <span class="n">Tensi</span><span class="err">Ã³</span><span class="n">n</span> <span class="n">en</span> <span class="n">el</span> <span class="n">inducido</span> <span class="p">[</span><span class="n">V</span><span class="p">]</span>  
<span class="n">Ia</span> <span class="o">-&gt;</span> <span class="n">intensidad</span> <span class="n">en</span> <span class="n">el</span> <span class="n">inducido</span> <span class="p">[</span><span class="n">A</span><span class="p">]</span>    <span class="n">Vfd</span> <span class="o">-&gt;</span> <span class="n">Tensi</span><span class="err">Ã³</span><span class="n">n</span> <span class="n">en</span> <span class="n">el</span> <span class="n">inductor</span> <span class="p">[</span><span class="n">V</span><span class="p">]</span>  
<span class="n">ifd</span> <span class="o">-&gt;</span> <span class="n">intensidad</span> <span class="n">en</span> <span class="n">el</span> <span class="n">inductor</span> <span class="p">[</span><span class="n">A</span><span class="p">]</span>    <span class="n">P</span> <span class="o">-&gt;</span> <span class="n">potencia</span> <span class="p">[</span><span class="n">W</span><span class="p">]</span>
<span class="n">wbase</span> <span class="o">-&gt;</span> <span class="n">velocidad</span> <span class="p">[</span><span class="n">rad</span><span class="p">/</span><span class="n">s</span><span class="p">]</span>              
<span class="c1">%}</span>
<span class="n">Pnom</span><span class="o">=</span><span class="mi">2200</span><span class="p">;</span>    <span class="n">n</span><span class="o">=</span><span class="mi">1000</span><span class="p">;</span>       <span class="n">Ua</span><span class="o">=</span><span class="mi">220</span><span class="p">;</span>     <span class="n">wbase</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="o">*</span><span class="n">n</span><span class="p">/</span><span class="mi">60</span><span class="p">;</span> 
<span class="n">Vfd</span><span class="o">=</span><span class="mi">200</span><span class="p">;</span>         <span class="n">ia</span><span class="o">=</span><span class="mi">11</span><span class="p">;</span>          <span class="n">ifd</span><span class="o">=</span><span class="mf">0.9</span><span class="p">;</span>
<span class="c1">%{</span>
<span class="mi">2</span><span class="p">)</span> <span class="n">Circuito</span> <span class="n">Electrico</span>
<span class="n">Ra</span> <span class="o">-&gt;</span> <span class="n">Resistencia</span> <span class="n">de</span> <span class="n">armadura</span> <span class="p">[</span><span class="n">ohms</span><span class="p">]</span>        <span class="n">La</span> <span class="o">-&gt;</span> <span class="n">Inductancia</span> <span class="n">de</span> <span class="n">armadura</span> <span class="p">[</span><span class="n">Henry</span><span class="p">]</span>
<span class="n">Rf</span> <span class="o">-&gt;</span> <span class="n">Resistencia</span> <span class="n">de</span> <span class="n">campo</span> <span class="p">[</span><span class="n">ohms</span><span class="p">]</span>            <span class="n">Lf</span> <span class="o">-&gt;</span> <span class="n">Inductancia</span> <span class="n">de</span> <span class="n">campo</span> <span class="p">[</span><span class="n">Henry</span><span class="p">]</span>
<span class="n">J</span> <span class="o">-&gt;</span>    <span class="p">[</span><span class="n">Kg</span><span class="p">/</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span><span class="p">]</span>                <span class="n">B</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Nms</span><span class="o">^</span><span class="mi">2</span><span class="p">]</span>    <span class="n">Kb</span> <span class="o">-&gt;</span>   <span class="p">[</span><span class="n">Nm</span><span class="p">/</span><span class="n">A</span><span class="o">^</span><span class="mi">2</span><span class="p">]</span>    
<span class="c1">%d.Ra=8+1.4+3.8;     d.La=1;    d.Rf=350;  d.Lf=7.6;   </span>
<span class="k">...</span><span class="c"> NOTA: Ea2=n2*Ea1/n1=208.727;    k_phi2=Ea2/w2=0.83397;    </span>
<span class="c1">%}</span>
<span class="n">d</span><span class="o">.</span><span class="n">Ra</span><span class="o">=</span><span class="mf">2.442176945</span><span class="p">;</span>  <span class="n">d</span><span class="o">.</span><span class="n">La</span><span class="o">=</span><span class="mf">0.14098873</span><span class="p">;</span>  <span class="n">d</span><span class="o">.</span><span class="n">Rf</span><span class="o">=</span><span class="mf">211.5859</span><span class="p">;</span>   <span class="n">d</span><span class="o">.</span><span class="n">Lf</span><span class="o">=</span><span class="mf">7.1278</span><span class="p">;</span>    
<span class="n">d</span><span class="o">.</span><span class="n">J</span><span class="o">=</span><span class="mf">0.01347</span><span class="p">;</span>        <span class="n">d</span><span class="o">.</span><span class="n">B</span><span class="o">=</span><span class="mf">0.006316</span><span class="p">;</span>   <span class="n">d</span><span class="o">.</span><span class="n">Kb</span><span class="o">=</span><span class="mf">1.909</span><span class="p">;</span>      

<span class="n">ini</span><span class="o">=</span><span class="p">[</span><span class="mi">11</span><span class="p">;</span> <span class="mf">0.9</span><span class="p">;</span><span class="mf">104.7198</span><span class="p">];</span> <span class="n">TL0</span><span class="o">=</span><span class="mf">20.33759</span><span class="p">;</span>
<span class="nb">save</span> <span class="n">d</span>

</code></pre></div></div>

<h3 id="modelado-dinÃ¡mico-del-motor-de-dc">Modelado dinÃ¡mico del motor de DC</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%% update 2021</span>
<span class="c1">%{</span>
 <span class="n">Simulation</span> <span class="n">of</span> <span class="n">DC</span> <span class="n">Machine</span> <span class="n">Transient</span> <span class="n">Behavior</span>
<span class="n">inputs</span>  <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Ua</span> <span class="n">Uf</span>  <span class="n">Tl</span><span class="p">]</span>
<span class="n">states</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">ia</span> <span class="k">if</span> <span class="n">wm</span><span class="p">]</span>
<span class="c1">%}</span>
<span class="k">function</span> <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">MotorDC3th</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="nb">flag</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">)</span>
<span class="k">switch</span> <span class="nb">flag</span><span class="p">,</span>
<span class="k">case</span> <span class="mi">0</span><span class="p">,</span>  <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">mdlInitializeSizes</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">);</span>
<span class="k">case</span> <span class="mi">1</span><span class="p">,</span>  <span class="n">sys</span><span class="o">=</span><span class="n">mdlDerivatives</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
<span class="k">case</span> <span class="mi">3</span><span class="p">,</span>  <span class="n">sys</span><span class="o">=</span><span class="n">mdlOutputs</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
<span class="k">case</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">},</span>   <span class="n">sys</span><span class="o">=</span><span class="p">[];</span>
<span class="k">otherwise</span>   
        <span class="nb">error</span><span class="p">([</span><span class="s1">'Unhandled flag='</span><span class="p">,</span><span class="nb">num2str</span><span class="p">(</span><span class="nb">flag</span><span class="p">)]);</span>
<span class="k">end</span>

<span class="k">function</span> <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">mdlInitializeSizes</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">)</span>
 <span class="n">sizes</span> <span class="o">=</span> <span class="n">simsizes</span><span class="p">;</span>                  <span class="n">sizes</span><span class="o">.</span><span class="n">NumContStates</span>  <span class="o">=</span><span class="mi">3</span><span class="p">;</span> 
 <span class="n">sizes</span><span class="o">.</span><span class="n">NumDiscStates</span>  <span class="o">=</span><span class="mi">0</span><span class="p">;</span>    <span class="n">sizes</span><span class="o">.</span><span class="n">NumOutputs</span>     <span class="o">=</span><span class="mi">3</span><span class="p">;</span>
 <span class="n">sizes</span><span class="o">.</span><span class="n">NumInputs</span>      <span class="o">=</span><span class="mi">3</span><span class="p">;</span>       <span class="n">sizes</span><span class="o">.</span><span class="n">DirFeedthrough</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>        
 <span class="n">sizes</span><span class="o">.</span><span class="n">NumSampleTimes</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>   <span class="n">sys</span> <span class="o">=</span> <span class="n">simsizes</span><span class="p">(</span><span class="n">sizes</span><span class="p">);</span>
<span class="n">x0</span><span class="o">=</span><span class="n">ini</span><span class="p">;</span>     <span class="n">str</span><span class="o">=</span><span class="p">[];</span>      <span class="n">ts</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">];</span>   

<span class="k">function</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlDerivatives</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>   
<span class="c1">%Laf=d.Kb/ifd; %Te=Laf*ia*ifd;</span>
<span class="n">Ua</span><span class="o">=</span><span class="n">u</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">Ufd</span><span class="o">=</span><span class="n">u</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">Tm</span><span class="o">=</span><span class="n">u</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">ia</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">ifd</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">w</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">dia</span><span class="o">=</span><span class="p">(</span><span class="n">Ua</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Ra</span><span class="o">*</span><span class="n">ia</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Kb</span><span class="o">*</span><span class="n">w</span><span class="p">)/</span><span class="n">d</span><span class="o">.</span><span class="n">La</span><span class="p">;</span>
<span class="n">difd</span><span class="o">=</span><span class="p">(</span><span class="n">Ufd</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Rf</span><span class="o">*</span><span class="n">ifd</span><span class="p">)/</span><span class="n">d</span><span class="o">.</span><span class="n">Lf</span><span class="p">;</span>
<span class="n">Te</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Kb</span><span class="o">*</span><span class="n">ia</span><span class="p">;</span>
<span class="n">dw</span><span class="o">=</span><span class="p">(</span><span class="n">Te</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">B</span><span class="o">*</span><span class="n">w</span><span class="o">-</span><span class="n">Tm</span><span class="p">)/</span><span class="n">d</span><span class="o">.</span><span class="n">J</span><span class="p">;</span>
<span class="n">sys</span><span class="o">=</span><span class="p">[</span><span class="n">dia</span><span class="p">;</span><span class="n">difd</span><span class="p">;</span><span class="n">dw</span><span class="p">];</span> 

<span class="k">function</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlOutputs</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
<span class="n">sys</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="n">x</span><span class="p">(</span><span class="mi">3</span><span class="p">)];</span>
</code></pre></div></div>

<h3 id="inicializaciÃ³n-del-motor">InicializaciÃ³n del motor</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%% update 2021</span>
<span class="c1">% datos del motor</span>

<span class="n">TL0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="n">Ua0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>  <span class="n">Vfd0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>      <span class="c1">% Note: These parameters must be zero </span>
<span class="n">wmec0</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="p">/</span><span class="mi">60</span><span class="p">;</span>  <span class="n">ia0</span><span class="o">=</span><span class="mi">11</span><span class="p">;</span> <span class="n">ifd0</span><span class="o">=</span><span class="mf">0.9</span><span class="p">;</span>
<span class="c1">%wmec0 = 700*2*pi/60;  ia0=0.69; ifd0=0.9;</span>
<span class="c1">%wmec0 = 295*2*pi/60;  ia0=0.78; ifd0=0.9;</span>
<span class="c1">%wmec0 = 295*2*pi/60;  ia0=0.69; ifd0=0.9;</span>
<span class="c1">%i0=0.48 0.52 0.57 0.61 0.65 0.68 0.69 0.71 0.73 0.74 0.75 0.76 0.77 0.78 0.78 0.78 0.78 0.79 0.8 0.81 0.82 0.83</span>

<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t 1).  Operating Point Specifics Define '</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t- wmec0  = %d  [rad/s]'</span><span class="p">,</span><span class="n">wmec0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t  Unknown: '</span><span class="p">));</span>  
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t \t \t Ua, Vfd, Tm0 \n'</span><span class="p">));</span>
<span class="n">NameModel</span><span class="o">=</span><span class="s1">'SimMotorDC3th'</span><span class="p">;</span>
<span class="n">Model_spec</span> <span class="o">=</span> <span class="n">operspec</span><span class="p">(</span><span class="n">NameModel</span><span class="p">)</span> <span class="p">;</span> <span class="c1">% obtiene el punto de operacion</span>
<span class="k">...</span><span class="c"> outputs</span>
<span class="n">NameBlockOutAdd</span><span class="o">=</span><span class="s1">'SimMotorDC3th/out'</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="k">...</span><span class="c"> inputs</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">States</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]</span><span class="s1">';           Model_spec.States(1).x = [ia0 ifd0 wmec0]'</span><span class="p">;</span>  
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">Ua0</span><span class="p">;</span> <span class="c1">% </span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">Vfd0</span><span class="p">;</span> <span class="c1">% </span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">TL0</span><span class="p">;</span> <span class="c1">% </span>

<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">ia0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">ifd0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">wmec0</span><span class="p">;</span>
<span class="k">...</span><span class="c"> Find the operating point values  about the operating point</span>
<span class="p">[</span><span class="n">NameModel_op</span><span class="p">,</span><span class="n">op_report</span><span class="p">]</span><span class="o">=</span><span class="n">findop</span><span class="p">(</span><span class="n">NameModel</span><span class="p">,</span><span class="n">Model_spec</span><span class="p">);</span>
<span class="n">ini</span><span class="o">=</span><span class="n">NameModel_op</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">x</span><span class="p">;</span>                  <span class="n">Ua0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>
<span class="n">Vfd0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>         <span class="n">TL0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>
<span class="nb">save</span> <span class="n">NameModel_op</span>
<span class="nb">disp</span> <span class="s1">'Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬'</span><span class="p">;</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' SOLUTION:'</span><span class="p">));</span>            <span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' Ua0  =%d'</span><span class="p">,</span><span class="n">Ua0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' Vfd0  =%d'</span><span class="p">,</span><span class="n">Vfd0</span><span class="p">));</span>      <span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' TL =%d'</span><span class="p">,</span><span class="n">TL0</span><span class="p">));</span>
<span class="nb">disp</span> <span class="s1">'Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬'</span><span class="p">;</span>
</code></pre></div></div>

<p>salida al ejecutar el cÃ³digo</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="n">IniCond_2021</span>
	 <span class="mi">1</span><span class="p">)</span><span class="o">.</span>  <span class="n">Operating</span> <span class="n">Point</span> <span class="n">Specifics</span> <span class="n">Define</span> 
	 	 	<span class="o">-</span> <span class="n">wmec0</span>  <span class="o">=</span> <span class="mf">1.047198e+02</span>  <span class="p">[</span><span class="n">rad</span><span class="p">/</span><span class="n">s</span><span class="p">]</span>
	  <span class="n">Unknown</span><span class="p">:</span> 
	 	 	 	 	 <span class="n">Ua</span><span class="p">,</span> <span class="n">Vfd</span><span class="p">,</span> <span class="n">Tm0</span> 


 <span class="n">Operating</span> <span class="n">Point</span> <span class="n">Search</span> <span class="n">Report</span><span class="p">:</span>
<span class="o">---------------------------------</span>

 <span class="n">Operating</span> <span class="n">Report</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Model</span> <span class="n">SimMotorDC3th</span><span class="o">.</span>
 <span class="p">(</span><span class="n">Time</span><span class="o">-</span><span class="n">Varying</span> <span class="n">Components</span> <span class="n">Evaluated</span> <span class="n">at</span> <span class="nb">time</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">Operating</span> <span class="n">point</span> <span class="n">specifications</span> <span class="n">were</span> <span class="n">successfully</span> <span class="n">met</span><span class="o">.</span>
<span class="n">States</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">MotorDC</span>
      <span class="n">x</span><span class="p">:</span>            <span class="mi">11</span>      <span class="n">dx</span><span class="p">:</span>     <span class="o">-</span><span class="mf">1.41e-12</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>           <span class="mf">0.9</span>      <span class="n">dx</span><span class="p">:</span>             <span class="mi">0</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>           <span class="mi">105</span>      <span class="n">dx</span><span class="p">:</span>     <span class="o">-</span><span class="mf">5.28e-13</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">Inputs</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">U</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      <span class="n">u</span><span class="p">:</span>           <span class="mi">227</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>
<span class="p">(</span><span class="mf">2.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">U</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
      <span class="n">u</span><span class="p">:</span>           <span class="mi">190</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>
<span class="p">(</span><span class="mf">3.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">T</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
      <span class="n">u</span><span class="p">:</span>          <span class="mf">20.3</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>

<span class="n">Outputs</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">out</span>
      <span class="n">y</span><span class="p">:</span>            <span class="mi">11</span>    <span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="p">(</span><span class="mf">2.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">out</span>
      <span class="n">y</span><span class="p">:</span>           <span class="mf">0.9</span>    <span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
<span class="p">(</span><span class="mf">3.</span><span class="p">)</span> <span class="n">SimMotorDC3th</span><span class="p">/</span><span class="n">out</span>
      <span class="n">y</span><span class="p">:</span>           <span class="mi">105</span>    <span class="p">(</span><span class="mi">105</span><span class="p">)</span>

<span class="err">Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬</span>
 <span class="n">SOLUTION</span><span class="p">:</span>
 <span class="n">Ua0</span>  <span class="o">=</span><span class="mf">2.267740e+02</span>
 <span class="n">Vfd0</span>  <span class="o">=</span><span class="mf">1.904273e+02</span>
 <span class="n">TL</span> <span class="o">=</span><span class="mf">2.033759e+01</span>
<span class="err">Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬</span>
</code></pre></div></div>

<h3 id="linealizaciÃ³n-del-modelo">LinealizaciÃ³n del modelo</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%% update 2021</span>
<span class="c1">% datos del motor</span>

<span class="n">TL0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="n">Ua0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>  <span class="n">Vfd0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>      <span class="c1">% Note: These parameters must be zero </span>
<span class="n">wmec0</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="p">/</span><span class="mi">60</span><span class="p">;</span>  <span class="n">ia0</span><span class="o">=</span><span class="mi">11</span><span class="p">;</span> <span class="n">ifd0</span><span class="o">=</span><span class="mf">0.9</span><span class="p">;</span>
<span class="c1">%wmec0 = 700*2*pi/60;  ia0=0.69; ifd0=0.9;</span>
<span class="c1">%wmec0 = 295*2*pi/60;  ia0=0.78; ifd0=0.9;</span>
<span class="c1">%wmec0 = 295*2*pi/60;  ia0=0.69; ifd0=0.9;</span>
<span class="c1">%i0=0.48 0.52 0.57 0.61 0.65 0.68 0.69 0.71 0.73 0.74 0.75 0.76 0.77 0.78 0.78 0.78 0.78 0.79 0.8 0.81 0.82 0.83</span>

<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t 1).  Operating Point Specifics Define '</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t- wmec0  = %d  [rad/s]'</span><span class="p">,</span><span class="n">wmec0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t  Unknown: '</span><span class="p">));</span>  
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t \t \t Ua, Vfd, Tm0 \n'</span><span class="p">));</span>
<span class="n">NameModel</span><span class="o">=</span><span class="s1">'SimMotorDC3th'</span><span class="p">;</span>
<span class="n">Model_spec</span> <span class="o">=</span> <span class="n">operspec</span><span class="p">(</span><span class="n">NameModel</span><span class="p">)</span> <span class="p">;</span> <span class="c1">% obtiene el punto de operacion</span>
<span class="k">...</span><span class="c"> outputs</span>
<span class="n">NameBlockOutAdd</span><span class="o">=</span><span class="s1">'SimMotorDC3th/out'</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="k">...</span><span class="c"> inputs</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">States</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]</span><span class="s1">';           Model_spec.States(1).x = [ia0 ifd0 wmec0]'</span><span class="p">;</span>  
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">Ua0</span><span class="p">;</span> <span class="c1">% </span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">Vfd0</span><span class="p">;</span> <span class="c1">% </span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>           <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">TL0</span><span class="p">;</span> <span class="c1">% </span>

<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">ia0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">ifd0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>                 <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">y</span>     <span class="o">=</span> <span class="n">wmec0</span><span class="p">;</span>
<span class="k">...</span><span class="c"> Find the operating point values  about the operating point</span>
<span class="p">[</span><span class="n">NameModel_op</span><span class="p">,</span><span class="n">op_report</span><span class="p">]</span><span class="o">=</span><span class="n">findop</span><span class="p">(</span><span class="n">NameModel</span><span class="p">,</span><span class="n">Model_spec</span><span class="p">);</span>
<span class="n">ini</span><span class="o">=</span><span class="n">NameModel_op</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">x</span><span class="p">;</span>                  <span class="n">Ua0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>
<span class="n">Vfd0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>         <span class="n">TL0</span> <span class="o">=</span> <span class="n">NameModel_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">;</span>
<span class="nb">save</span> <span class="n">NameModel_op</span>
<span class="nb">disp</span> <span class="s1">'Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬'</span><span class="p">;</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' SOLUTION:'</span><span class="p">));</span>            <span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' Ua0  =%d'</span><span class="p">,</span><span class="n">Ua0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' Vfd0  =%d'</span><span class="p">,</span><span class="n">Vfd0</span><span class="p">));</span>      <span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">' TL =%d'</span><span class="p">,</span><span class="n">TL0</span><span class="p">));</span>
<span class="nb">disp</span> <span class="s1">'Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="determinaciÃ³n-de-la-funciÃ³n-de-transferencia">DeterminaciÃ³n de la funciÃ³n de transferencia</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">load</span> <span class="n">NameModel_tf</span>
<span class="c1">%{</span>
<span class="n">DH</span><span class="o">=</span><span class="nb">step</span><span class="p">([</span><span class="n">num_tf</span><span class="p">{</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">}],[</span><span class="n">den_tf</span><span class="p">{</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">}],</span><span class="n">t</span><span class="p">)</span>  <span class="n">specify</span> <span class="n">the</span> <span class="n">transfer</span> <span class="k">function</span> <span class="n">from</span> <span class="nb">input</span> <span class="n">j</span> <span class="n">to</span> <span class="n">output</span> <span class="n">i</span>
<span class="c1">%}</span>
<span class="nb">clc</span>
<span class="k">...</span><span class="c"> separacion de los terminos de tf</span>
<span class="p">[</span><span class="n">num</span><span class="p">,</span><span class="n">den</span><span class="p">]</span><span class="o">=</span><span class="n">tfdata</span><span class="p">(</span><span class="n">NameModel_tf</span><span class="p">);</span>  <span class="c1">%celldisp(num);celldisp(den)</span>
<span class="k">...</span><span class="c"> Funciones de transferencia obtenidas:</span>
<span class="k">...</span><span class="c">NUM{i,j} and DEN{i,j} specify the  transfer function from input j to output i. </span>
<span class="n">tf11</span><span class="o">=</span><span class="n">NameModel_tf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">%(i,j)  Ua &amp;ia</span>
<span class="n">tf31</span><span class="o">=</span><span class="n">NameModel_tf</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">%(i,j)  Ua &amp;wm</span>
<span class="n">tf22</span><span class="o">=</span><span class="n">NameModel_tf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>  <span class="c1">%(i,j)  Ufd &amp;ifd</span>
<span class="n">tf13</span><span class="o">=</span><span class="n">NameModel_tf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>  <span class="c1">%(i,j)  Tm &amp;ia</span>
<span class="n">tf33</span><span class="o">=</span><span class="n">NameModel_tf</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>  <span class="c1">%(i,j)  Tm &amp;wm</span>

<span class="nb">disp</span> <span class="s1">'Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬Â¬'</span>
<span class="nb">disp</span><span class="p">(</span><span class="s1">'control Ufd &amp; ifd'</span><span class="p">)</span>
<span class="p">[</span><span class="n">A22</span><span class="p">,</span><span class="n">B22</span><span class="p">,</span><span class="n">D22</span><span class="p">,</span><span class="n">H22</span><span class="p">]</span><span class="o">=</span><span class="n">tf2ss</span><span class="p">(</span><span class="n">num</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">},</span><span class="n">den</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">});</span> <span class="n">printsys</span><span class="p">(</span><span class="n">A22</span><span class="p">,</span><span class="n">B22</span><span class="p">,</span><span class="n">D22</span><span class="p">,</span><span class="n">H22</span><span class="p">)</span> <span class="c1">%</span>
<span class="k">...</span><span class="c"> comportamiento en lazo abierto</span>
<span class="nb">figure</span><span class="p">(</span><span class="s1">'Name'</span><span class="p">,</span><span class="s1">' disturbance step response to Ifd'</span><span class="p">)</span>
<span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mf">0.001</span><span class="p">:</span><span class="mf">0.5</span><span class="p">];</span>  <span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">]</span><span class="o">=</span><span class="nb">step</span><span class="p">(</span><span class="n">num</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">},</span><span class="n">den</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">},</span><span class="n">t</span><span class="p">);</span> <span class="c1">% respuesta al escalon</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nb">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">);</span><span class="nb">grid</span><span class="p">;</span> <span class="nb">xlabel</span><span class="p">(</span><span class="s1">'Time [sec]'</span><span class="p">);</span> <span class="nb">ylabel</span><span class="p">(</span><span class="s1">'ifd [N]'</span><span class="p">);</span> <span class="nb">hold</span> <span class="n">on</span>
<span class="p">[</span><span class="n">P</span><span class="p">,</span><span class="n">Z</span><span class="p">]</span><span class="o">=</span><span class="n">pzmap</span><span class="p">(</span><span class="n">num</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">},</span><span class="n">den</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">})</span>
<span class="k">...</span><span class="c"> Comportamiento en lazo cerrado</span>
<span class="k">...</span><span class="c">figure('Name','Close-loop disturbance step response')</span>
<span class="p">[</span><span class="n">num_cl</span><span class="p">,</span><span class="n">den_cl</span><span class="p">]</span><span class="o">=</span><span class="n">cloop</span><span class="p">(</span><span class="n">num</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">},</span><span class="n">den</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">});</span>
<span class="nb">roots</span><span class="p">(</span><span class="n">den_cl</span><span class="p">)</span> <span class="c1">% para conocer los polos inestables %[r,k]=rlocfind(tf_cl);</span>
<span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">]</span><span class="o">=</span><span class="nb">step</span><span class="p">(</span><span class="n">num_cl</span><span class="p">,</span><span class="n">den_cl</span><span class="p">,</span><span class="n">t</span><span class="p">);</span> <span class="c1">% respuesta al escalon</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="nb">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">);</span><span class="nb">grid</span><span class="p">;</span> <span class="nb">xlabel</span><span class="p">(</span><span class="s1">'Time [sec]'</span><span class="p">);</span> <span class="nb">ylabel</span><span class="p">(</span><span class="s1">'ifd [sec]'</span><span class="p">);</span> <span class="nb">hold</span> <span class="n">on</span>
<span class="k">...</span><span class="c"> controlador PI</span>
<span class="k">...</span><span class="c">figure('Name','Close-loop with control')</span>
<span class="n">tf_ctr22</span><span class="o">=</span><span class="n">tf</span><span class="p">(</span><span class="mi">13693</span><span class="o">*</span><span class="p">[</span><span class="mf">0.019</span> <span class="mi">1</span><span class="p">],[</span><span class="mi">1</span> <span class="mi">0</span><span class="p">]);</span>  <span class="nb">save</span> <span class="n">tf_ctr22</span>
<span class="k">...</span><span class="c">figure(1), bode (tf_ctr35);  figure(2), </span>
<span class="k">...</span><span class="c"> nyquist (tf_ctr35) %That's the Im-axis in the Nyquist diagram  </span>
<span class="n">tf_ctrOK</span><span class="o">=</span><span class="n">series</span><span class="p">(</span><span class="n">tf_ctr22</span><span class="p">,</span><span class="n">tf22</span><span class="p">);</span>     <span class="n">tf_cl</span><span class="o">=</span><span class="n">feedback</span><span class="p">(</span><span class="n">tf_ctrOK</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="nb">step</span><span class="p">(</span><span class="n">tf_cl</span><span class="p">,</span><span class="n">t</span><span class="p">);</span>         
<span class="nb">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="nb">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">);</span> <span class="nb">xlabel</span><span class="p">(</span><span class="s1">'time [sec]'</span><span class="p">),</span> <span class="nb">ylabel</span><span class="p">(</span><span class="s1">'ifd(t)'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="directorios-motor-dc">Directorios Motor DC</h2>

<p>Modelado matemÃ¡tico del motor dc</p>

<h3 id="diseÃ±o-del-control-del-motor-de-dc">DiseÃ±o del control del motor de dc</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\src\Motors\DCmtr\mdl\3th_v2\rev5
pc104\MTLB\bin\MyComputePrg
</code></pre></div></div>

<h3 id="parte-de-modelado-del-motor">parte de modelado del motor</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\src\Motors
</code></pre></div></div>

<p>[]:</p>

:ET
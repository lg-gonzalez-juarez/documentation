I"ˇŸ<h2 id="notas-acerca-del-estado-del-arte-de-la-maquina-sincrona">Notas acerca del estado del arte de la maquina sincrona</h2>

<h3 id="lista-de-libros-y-modelos">Lista de libros y modelos</h3>

<ul>
  <li>Fraile Mora
    <ul>
      <li>resumen de la pagina 416 y 417 reaccion de polos salientes</li>
    </ul>
  </li>
  <li>Krause control, [Krause,Wasynczuk,Sudhoff]analyisOfElectricalMachineryandDriveSystems
    <ul>
      <li>pag 36, circuito de la maquina de polos salientes,</li>
      <li>pag 193 ecuaciones dinamica</li>
      <li>linealizacion 316</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>maquina reducida de orden 342,357</li>
    </ul>
  </li>
  <li>
    <p>Chapma, circuito equivalente</p>
  </li>
  <li>Dynamic Simulation of Electric Machine using Matlab, cheen
    - pag 309, modelo con kd
    - permanent magnets pag 311
    - tres fases, pag 323
    - seis fases,  pag 340-350
    -</li>
</ul>

<h3 id="modelado-m√°tem√°tico-seg√∫n-krause">Modelado m√°tem√°tico seg√∫n Krause</h3>

<p>De acuerdo a la documentaci√≥n de matlab, el modelo proporcionado por la toolbox se basa en el libro de krause (Analysis of Electric Machine, p√°gina 122, m√°quina de tres fases, dos polos, de imanes permanentes). Las ecuaciones son las siguientes</p>

\[\begin{align*}
&amp;\bf{v}_{abc,s}=\bf{r}_s \bf{i}_{abc,s} + p \bf{\lambda}_{abc,s}\\
\bf{\lambda}_{abc,s}&amp;=\bf{L}_s \bf{i}_{abc,s} + \bf{\lambda}^{'}_m\\
T_e&amp;=J\left( \frac{2}{p}p \omega_r \right) + B_m\left( \frac{2}{p}\omega_r \right) + T_L
\end{align*}\]

<p><strong>Recuerde p, es el operador derivada</strong></p>

<p><strong>NOTE</strong> REVISAR SECCION-&gt; VOLTAGE AND TORQUE EQUATIONS IN ROTOR
REFERENCE-FRAME VARIABLES ‚Äì&gt; pag 126</p>

<p>Las ecuaciones a implementar son: 4.3-10 hasta 4.3.12</p>

<h2 id="modelo-basado-en-kundur">Modelo basado en kundur</h2>
<p>REVISAR ESTO CON ALBERTO EN MODELICA
<code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\Matlab\Motors\SYNgnrt\Kundur\mdl\aux2</code>
inicializacion, ok 2021</p>

<h2 id="proceso-de-modelado">Proceso de Modelado</h2>

<p>En este apartado se explica el proceso de inicializaci√≥n de la m√°quina. En la figura se presenta la captura de pantalla del modelo realizado en simulink</p>

<figure><img class="docimage" src="images//matlab/mdl_maqsynch_8th.PNG" alt="matlab sim" /><figcaption>Simulation machine syncrhonous</figcaption></figure>

<p>En los siguientes directorio se tiene:</p>
<ul>
  <li>Modelado del motor</li>
  <li>Medidas PQ</li>
  <li>Datos del motor</li>
</ul>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\MyComputePrg\MtrSincr'</span><span class="p">)</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\MyComputePrg\medidas'</span><span class="p">)</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\DataSheet'</span><span class="p">);</span><span class="n">dtGenSin31300V_v1</span>
</code></pre></div></div>

<h3 id="modelado-de-las-ecuaciones">Modelado de las ecuaciones</h3>

<p>Se emplea el modelo de octavo orden</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% Calculate operating characteristics of synchronous machine</span>
<span class="k">function</span> <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">SynMachine8th</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="nb">flag</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">)</span>
<span class="c1">% State variables       x:      [flux_d flux_fd flux_1d flux_q flux_1q flux_2q inc_wr delta]</span>
<span class="c1">% Inputs                u:      [ed efd eq Tm]</span>
<span class="c1">% Outputs               y:      [id ifd iq inc_wr delta Te]</span>
<span class="c1">% Inicial conditions    ini:    [flux_d flux_fd flux_1d flux_q flux_1q flux_2q inc_wr delta]</span>
<span class="k">switch</span> <span class="nb">flag</span><span class="p">,</span>
    <span class="k">case</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">mdlInitializeSizes</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlDerivatives</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">3</span><span class="p">,</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlOutputs</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
    <span class="k">case</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">},</span>   <span class="n">sys</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">otherwise</span><span class="p">,</span>   <span class="nb">error</span><span class="p">([</span><span class="s1">'Unhandled flag='</span><span class="p">,</span><span class="nb">num2str</span><span class="p">(</span><span class="nb">flag</span><span class="p">)]);</span>
<span class="k">end</span>

<span class="k">function</span> <span class="p">[</span><span class="n">sys</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="n">ts</span><span class="p">]</span><span class="o">=</span><span class="n">mdlInitializeSizes</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ini</span><span class="p">)</span>
 <span class="k">global</span> <span class="n">invL</span> 
    <span class="n">sizes</span> <span class="o">=</span> <span class="n">simsizes</span><span class="p">;</span>     <span class="n">sizes</span><span class="o">.</span><span class="n">NumContStates</span>  <span class="o">=</span><span class="mi">8</span><span class="p">;</span>    <span class="n">sizes</span><span class="o">.</span><span class="n">NumDiscStates</span>  <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">sizes</span><span class="o">.</span><span class="n">NumOutputs</span>     <span class="o">=</span><span class="mi">6</span><span class="p">;</span>   <span class="n">sizes</span><span class="o">.</span><span class="n">NumInputs</span>      <span class="o">=</span><span class="mi">4</span><span class="p">;</span>    <span class="n">sizes</span><span class="o">.</span><span class="n">DirFeedthrough</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">sizes</span><span class="o">.</span><span class="n">NumSampleTimes</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>    <span class="n">sys</span> <span class="o">=</span> <span class="n">simsizes</span><span class="p">(</span><span class="n">sizes</span><span class="p">);</span>    <span class="n">x0</span><span class="o">=</span><span class="n">ini</span><span class="p">;</span>     <span class="n">str</span><span class="o">=</span><span class="p">[];</span>       <span class="n">ts</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">];</span> 
    <span class="n">L_d</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Ld</span> <span class="n">d</span><span class="o">.</span><span class="n">Lad</span> <span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="p">;</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span> <span class="n">d</span><span class="o">.</span><span class="n">Lffd</span> <span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="p">;</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span> <span class="n">d</span><span class="o">.</span><span class="n">Lad</span> <span class="n">d</span><span class="o">.</span><span class="n">L11d</span><span class="p">];</span>
    <span class="n">L_q</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Lq</span> <span class="n">d</span><span class="o">.</span><span class="n">Laq</span> <span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="p">;</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Laq</span> <span class="n">d</span><span class="o">.</span><span class="n">L11q</span> <span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="p">;</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Laq</span> <span class="n">d</span><span class="o">.</span><span class="n">Laq</span> <span class="n">d</span><span class="o">.</span><span class="n">L22q</span><span class="p">];</span>
    <span class="n">L</span><span class="o">=</span><span class="p">[</span><span class="n">L_d</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="nb">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">L_q</span><span class="p">];</span>
    <span class="n">invL</span><span class="o">=</span><span class="nb">inv</span><span class="p">(</span><span class="n">L</span><span class="p">);</span>
        
<span class="k">function</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlDerivatives</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>   
 <span class="k">global</span> <span class="n">invL</span>
<span class="n">i_total</span><span class="o">=</span><span class="n">invL</span><span class="o">*</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">);</span>
<span class="n">id</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="n">ifd</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="n">i1d</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="n">iq</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="n">i1q</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="n">i2q</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<span class="n">Te</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">iq</span><span class="o">-</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">id</span><span class="p">;</span>
<span class="n">wr</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span> <span class="c1">%wr=1pu+inc_wr</span>
<span class="n">dflux_d</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="n">u</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">wr</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Ra</span><span class="o">*</span><span class="n">id</span><span class="p">);</span>
<span class="n">dflux_fd</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="n">u</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Rfd</span><span class="o">*</span><span class="n">ifd</span><span class="p">);</span>
<span class="n">dflux_1d</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">R1d</span><span class="o">*</span><span class="n">i1d</span><span class="p">);</span>
<span class="n">dflux_q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="n">u</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">-</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">wr</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Ra</span><span class="o">*</span><span class="n">iq</span><span class="p">);</span>
<span class="n">dflux_1q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">R1q</span><span class="o">*</span><span class="n">i1q</span><span class="p">);</span>
<span class="n">dflux_2q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">R2q</span><span class="o">*</span><span class="n">i2q</span><span class="p">);</span>
<span class="n">dinc_wr</span><span class="o">=</span><span class="p">(</span><span class="n">u</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">-</span><span class="n">Te</span><span class="o">-</span><span class="n">d</span><span class="o">.</span><span class="n">Kd</span><span class="o">*</span><span class="n">x</span><span class="p">(</span><span class="mi">7</span><span class="p">))/(</span><span class="mi">2</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">H</span><span class="p">);</span>
<span class="n">ddelta</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="p">;</span>
<span class="n">sys</span><span class="o">=</span><span class="p">[</span><span class="n">dflux_d</span><span class="p">;</span><span class="n">dflux_fd</span><span class="p">;</span><span class="n">dflux_1d</span><span class="p">;</span><span class="n">dflux_q</span><span class="p">;</span><span class="n">dflux_1q</span><span class="p">;</span><span class="n">dflux_2q</span><span class="p">;</span><span class="n">dinc_wr</span><span class="p">;</span><span class="n">ddelta</span><span class="p">];</span>

<span class="k">function</span> <span class="n">sys</span><span class="o">=</span><span class="n">mdlOutputs</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
<span class="k">global</span> <span class="n">invL</span> 
<span class="n">i_total</span><span class="o">=</span><span class="n">invL</span><span class="o">*</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">);</span>
<span class="n">id</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="n">ifd</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="n">iq</span><span class="o">=</span><span class="n">i_total</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="n">Te</span><span class="o">=</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">iq</span><span class="o">-</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">id</span><span class="p">;</span>
<span class="n">wr</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span> <span class="c1">%wr=1pu+inc_wr</span>
<span class="n">sys</span><span class="o">=</span><span class="p">[</span><span class="n">id</span><span class="p">;</span><span class="n">ifd</span><span class="p">;</span><span class="n">iq</span><span class="p">;</span><span class="n">x</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span><span class="n">x</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span><span class="n">Te</span><span class="p">];</span>
</code></pre></div></div>

<p>importante este modelo depende el que se usa</p>

<h3 id="inicializaci√≥n-del-modelo">Inicializaci√≥n del modelo</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%Valores de consigna.</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\MyComputePrg\MtrSincr'</span><span class="p">)</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\MyComputePrg\medidas'</span><span class="p">)</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s1">'D:\wk_matlab\uc3m\mt\pc104\Matlab\DataSheet'</span><span class="p">);</span><span class="n">dtGenSin31300V_v1</span>
<span class="c1">%ini=[flux_d0;flux_fd0;flux_1d0;flux_q0;flux_11q0;flux_22q0;inc_wr0;delta0];</span>

<span class="n">ed0</span><span class="o">=</span><span class="mf">0.5993</span><span class="p">;</span>  <span class="n">eq0</span><span class="o">=</span><span class="mf">0.8005</span><span class="p">;</span>     
<span class="n">P0</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>     <span class="n">Q0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>   <span class="n">delta0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>  <span class="c1">% valores consigna</span>
<span class="n">efd0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>   <span class="n">Tm0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>    <span class="c1">% estos valores deben ser cero</span>

<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t 1).  Operating Point Specifics Define '</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t-  Stator P0=  %d'</span><span class="p">,</span><span class="n">P0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t-  Stator Q0= %d'</span><span class="p">,</span><span class="n">Q0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t \t \t- delta0  = %d '</span><span class="p">,</span><span class="n">delta0</span><span class="p">));</span>
<span class="nb">disp</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">'\t  Unknown: efd0 Tm0 '</span><span class="p">));</span>  

<span class="n">NameModel</span><span class="o">=</span><span class="s1">'SymMtrSin8th'</span><span class="p">;</span>
<span class="n">Model_spec</span> <span class="o">=</span> <span class="n">operspec</span><span class="p">(</span><span class="n">NameModel</span><span class="p">)</span> <span class="p">;</span> <span class="c1">% obtiene el punto de operacion</span>

<span class="n">NameBlockOutAdd</span><span class="o">=</span><span class="s1">'SymMtrSin8th/out2'</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">Model_spec</span><span class="o">=</span><span class="n">addoutputspec</span><span class="p">(</span><span class="n">Model_spec</span><span class="p">,</span><span class="n">NameBlockOutAdd</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>

<span class="n">Model_spec</span><span class="o">.</span><span class="n">States</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">]</span><span class="o">'</span><span class="p">;</span> 
<span class="n">Model_spec</span><span class="o">.</span><span class="n">States</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="n">delta0</span><span class="p">]</span><span class="o">'</span><span class="p">;</span>

<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">efd0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">Tm0</span><span class="p">;</span>
<span class="c1">%[P0 Q0 delta0]</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="o">=</span> <span class="n">P0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="o">=</span> <span class="n">Q0</span><span class="p">;</span>
<span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">Known</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">Model_spec</span><span class="o">.</span><span class="n">Outputs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">delta0</span><span class="p">;</span>

<span class="p">[</span><span class="n">Model_op</span><span class="p">,</span><span class="n">op_report</span><span class="p">]</span><span class="o">=</span><span class="n">findop</span><span class="p">(</span><span class="n">NameModel</span><span class="p">,</span><span class="n">Model_spec</span><span class="p">);</span>
<span class="n">ini</span><span class="o">=</span><span class="n">Model_op</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">x</span><span class="p">;</span> 
<span class="n">efd0</span><span class="o">=</span> <span class="n">Model_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">u</span>
<span class="n">Tm0</span> <span class="o">=</span> <span class="n">Model_op</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">u</span>
</code></pre></div></div>

<p>En esta parte se tiene la inicializaci√≥n, con la funci√≥n <code class="language-plaintext highlighter-rouge">addoutputspec</code> y se calcula con el comando <code class="language-plaintext highlighter-rouge">findop</code>.</p>

<h3 id="datos-del-motor">Datos del motor</h3>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% loading machine parameters for synchronous machine</span>
<span class="nb">clear</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">close</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">clc</span>
<span class="c1">%...Description Parameters                     </span>
<span class="c1">%   Snom =&gt; rated power      [VA]        p =&gt;   pair of poles      </span>
<span class="c1">%   f    =&gt; rated frequency  [Hz]        nr =&gt;  nominal speed  [rpm]</span>
<span class="c1">%   Vll  =&gt; peak value of rated phase voltage [V]  rms</span>
<span class="c1">% MAIN</span>
<span class="n">f_red</span><span class="o">=</span><span class="mi">50</span><span class="p">;</span> <span class="n">Sn</span> <span class="o">=</span> <span class="mf">31.3e3</span> <span class="p">;</span> <span class="n">Vrms</span> <span class="o">=</span> <span class="mi">400</span> <span class="p">;</span> <span class="n">f_base</span> <span class="o">=</span> <span class="n">f_red</span> <span class="p">;</span> <span class="n">pp</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="c1">% MACHINE PU</span>
<span class="n">d</span><span class="o">.</span><span class="n">Ra</span><span class="o">=</span><span class="mf">0.04186</span> <span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">Ll</span><span class="o">=</span><span class="mf">0.063</span> <span class="p">;</span> 
<span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="o">=</span><span class="mf">1.497</span> <span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="o">=</span><span class="mf">0.717</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">Rfd</span><span class="o">=</span><span class="mf">0.02306</span><span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">Lffd</span><span class="o">=</span><span class="mf">0.1381</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">R1d</span><span class="o">=</span><span class="mf">0.1118</span> <span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">L11d</span><span class="o">=</span><span class="mf">0.1858</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">R1q</span><span class="o">=</span><span class="mf">0.09745</span> <span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">L11q</span><span class="o">=</span><span class="mf">0.1258</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">R2q</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">L22q</span><span class="o">=</span><span class="mf">0.0</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">H</span><span class="o">=</span><span class="mf">0.08671</span><span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">Ld</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Ll</span><span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">Lq</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="o">+</span><span class="n">d</span><span class="o">.</span><span class="n">Ll</span><span class="p">;</span>
<span class="n">d</span><span class="o">.</span><span class="n">Kd</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="n">Ra</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Ra</span> <span class="p">;</span> <span class="n">Lad</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Lad</span> <span class="p">;</span> <span class="n">Laq</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Laq</span><span class="p">;</span>
<span class="n">Ll</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Ll</span> <span class="p">;</span> <span class="n">H</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">H</span><span class="p">;</span> <span class="n">Ld</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Ld</span> <span class="p">;</span> <span class="n">Lq</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Lq</span><span class="p">;</span>
<span class="n">Rfd</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Rfd</span> <span class="p">;</span> <span class="n">Lffd</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">Lffd</span><span class="p">;</span>
<span class="n">R1d</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">R1d</span> <span class="p">;</span> <span class="n">L11d</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">L11d</span><span class="p">;</span>
<span class="n">R1q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">R1q</span> <span class="p">;</span> <span class="n">L11q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">L11q</span><span class="p">;</span>
<span class="n">R2q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">R2q</span> <span class="p">;</span> <span class="n">L22q</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">L22q</span><span class="p">;</span>
<span class="c1">% BASE VALUES</span>
<span class="n">S_base</span><span class="o">=</span><span class="n">Sn</span> <span class="p">;</span> <span class="n">es_base</span><span class="o">=</span><span class="n">Vrms</span><span class="o">*</span><span class="nb">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">/</span><span class="mi">3</span><span class="p">);</span>
<span class="n">is_base</span><span class="o">=</span><span class="mi">2</span><span class="p">/</span><span class="mi">3</span><span class="o">*</span><span class="n">S_base</span><span class="p">/</span><span class="n">es_base</span><span class="p">;</span>
<span class="n">w_base</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="o">*</span><span class="n">f_base</span><span class="p">;</span> <span class="n">d</span><span class="o">.</span><span class="n">w_base</span><span class="o">=</span><span class="n">w_base</span><span class="p">;</span> <span class="c1">%adding w_base to 'd' structure</span>
<span class="n">wm_base</span><span class="o">=</span><span class="n">w_base</span><span class="p">/</span><span class="n">pp</span><span class="p">;</span>
<span class="n">Zs_base</span><span class="o">=</span><span class="n">es_base</span><span class="p">/</span><span class="n">is_base</span><span class="p">;</span>
<span class="n">Ls_base</span><span class="o">=</span><span class="n">Zs_base</span><span class="p">/</span><span class="n">w_base</span><span class="p">;</span>
<span class="n">fluxs_base</span><span class="o">=</span><span class="n">Ls_base</span><span class="o">*</span><span class="n">is_base</span><span class="p">;</span>
<span class="n">T_base</span><span class="o">=</span><span class="n">S_base</span><span class="p">/</span><span class="n">wm_base</span><span class="p">;</span>
<span class="n">t_base</span><span class="o">=</span><span class="mi">1</span><span class="p">/</span><span class="n">w_base</span><span class="p">;</span>
<span class="c1">%INIT VALUES************************************</span>
<span class="c1">%TERMINAL VALUES (per unit)</span>
<span class="n">Pt</span><span class="o">=</span> <span class="mf">31.3e3</span><span class="p">/</span><span class="n">S_base</span> <span class="p">;</span> <span class="n">Qt</span><span class="o">=</span><span class="mi">0</span><span class="p">/</span><span class="n">S_base</span><span class="p">;</span>
<span class="n">Ut</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="n">It</span><span class="o">=</span><span class="nb">sqrt</span><span class="p">(</span><span class="n">Pt</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="n">Qt</span><span class="o">^</span><span class="mi">2</span><span class="p">)/</span><span class="n">Ut</span><span class="p">;</span>
<span class="n">fdp</span><span class="o">=</span><span class="n">Pt</span><span class="p">/</span><span class="n">Ut</span><span class="p">/</span><span class="n">It</span><span class="p">;</span>
<span class="n">fi</span><span class="o">=</span><span class="nb">acos</span><span class="p">(</span><span class="n">fdp</span><span class="p">);</span>
<span class="c1">%LOAD ANGLE;</span>
<span class="n">delta_i</span><span class="o">=</span><span class="nb">atan</span><span class="p">(</span> <span class="p">(</span><span class="n">Lq</span><span class="o">*</span><span class="n">It</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span><span class="o">-</span><span class="n">Ra</span><span class="o">*</span><span class="n">It</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span> <span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="n">Ut</span><span class="o">+</span><span class="n">Ra</span><span class="o">*</span><span class="n">It</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span><span class="o">+</span><span class="n">Lq</span><span class="o">*</span><span class="n">It</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">fi</span><span class="p">))</span> <span class="p">);</span>
<span class="c1">%dq VOLTAGE &amp; CURRENT</span>
<span class="n">Ud_init</span><span class="o">=</span><span class="n">Ut</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">delta_i</span><span class="p">);</span>       <span class="n">Uq_init</span><span class="o">=</span><span class="n">Ut</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">delta_i</span><span class="p">);</span>
<span class="n">Id_init</span><span class="o">=</span><span class="n">It</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">delta_i</span><span class="o">+</span><span class="n">fi</span><span class="p">);</span>    <span class="n">Iq_init</span><span class="o">=</span><span class="n">It</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">delta_i</span><span class="o">+</span><span class="n">fi</span><span class="p">);</span>
<span class="c1">% field and amortisseur circuits VOLTAGE &amp; CURRENT</span>
<span class="n">Ifd_init</span><span class="o">=</span><span class="p">(</span><span class="n">Uq_init</span><span class="o">+</span><span class="n">Ra</span><span class="o">*</span><span class="n">Iq_init</span><span class="o">+</span><span class="n">Ld</span><span class="o">*</span><span class="n">Id_init</span><span class="p">)/</span><span class="n">Lad</span><span class="p">;</span>
<span class="n">Ufd_init</span><span class="o">=</span><span class="n">Rfd</span><span class="o">*</span><span class="n">Ifd_init</span><span class="p">;</span>
<span class="n">I1d_init</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="n">I1q_init</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">I2q_init</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="c1">%MECH</span>
<span class="n">w_init</span><span class="o">=</span><span class="mi">1</span> <span class="p">;</span>
<span class="n">theta_init</span><span class="o">=-</span><span class="nb">pi</span><span class="p">/</span><span class="mi">2</span><span class="o">+</span><span class="n">delta_i</span><span class="p">;</span>
<span class="n">Tm_init</span><span class="o">=</span><span class="n">Pt</span><span class="o">+</span><span class="n">Ra</span><span class="o">*</span><span class="n">It</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>

<span class="n">flux_d0</span><span class="o">=</span><span class="mf">0.698536725</span><span class="p">;</span><span class="n">flux_fd0</span><span class="o">=</span><span class="mf">1.047739435</span><span class="p">;</span><span class="n">flux_1d0</span><span class="o">=</span><span class="mf">0.834806149</span><span class="p">;</span>
<span class="n">flux_q0</span><span class="o">=-</span><span class="mf">0.715574206</span><span class="p">;</span><span class="n">flux_11q0</span><span class="o">=-</span><span class="mf">0.66190614</span><span class="p">;</span><span class="n">flux_22q0</span><span class="o">=-</span><span class="mf">0.66190614</span><span class="p">;</span>
<span class="n">inc_wr0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">delta0</span><span class="o">=</span><span class="mf">0.6426</span><span class="p">;</span>
<span class="n">ini</span><span class="o">=</span><span class="p">[</span><span class="n">flux_d0</span><span class="p">;</span><span class="n">flux_fd0</span><span class="p">;</span><span class="n">flux_1d0</span><span class="p">;</span><span class="n">flux_q0</span><span class="p">;</span><span class="n">flux_11q0</span><span class="p">;</span><span class="n">flux_22q0</span><span class="p">;</span><span class="n">inc_wr0</span><span class="p">;</span><span class="n">delta0</span><span class="p">];</span>
</code></pre></div></div>

<h3 id="salida-de-la-inicializacion">Salida de la inicializacion</h3>

<p>Al ejecutar este script se tiene como salida lo siguiente:</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span><span class="p">)</span><span class="o">.</span>  <span class="n">Operating</span> <span class="n">Point</span> <span class="n">Specifics</span> <span class="n">Define</span> 
	 	 	<span class="o">-</span>  <span class="n">Stator</span> <span class="n">P0</span><span class="o">=</span>  <span class="mi">1</span>
	 	 	<span class="o">-</span>  <span class="n">Stator</span> <span class="n">Q0</span><span class="o">=</span> <span class="mi">0</span>
	 	 	<span class="o">-</span> <span class="n">delta0</span>  <span class="o">=</span> <span class="mi">0</span> 
	  <span class="n">Unknown</span><span class="p">:</span> <span class="n">efd0</span> <span class="n">Tm0</span> 

 <span class="n">Operating</span> <span class="n">Point</span> <span class="n">Search</span> <span class="n">Report</span><span class="p">:</span>
<span class="o">---------------------------------</span>

 <span class="n">Operating</span> <span class="n">Report</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Model</span> <span class="n">SymMtrSin8th</span><span class="o">.</span>
 <span class="p">(</span><span class="n">Time</span><span class="o">-</span><span class="n">Varying</span> <span class="n">Components</span> <span class="n">Evaluated</span> <span class="n">at</span> <span class="nb">time</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">Operating</span> <span class="n">point</span> <span class="n">specifications</span> <span class="n">were</span> <span class="n">successfully</span> <span class="n">met</span><span class="o">.</span>
<span class="n">States</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">Planta</span>
      <span class="n">x</span><span class="p">:</span>         <span class="mf">0.834</span>      <span class="n">dx</span><span class="p">:</span>      <span class="mf">8.72e-15</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>          <span class="mf">1.03</span>      <span class="n">dx</span><span class="p">:</span>     <span class="o">-</span><span class="mf">5.45e-15</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>         <span class="mf">0.872</span>      <span class="n">dx</span><span class="p">:</span>     <span class="o">-</span><span class="mf">1.56e-14</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>        <span class="o">-</span><span class="mf">0.624</span>      <span class="n">dx</span><span class="p">:</span>      <span class="mf">2.18e-15</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>        <span class="o">-</span><span class="mf">0.574</span>      <span class="n">dx</span><span class="p">:</span>      <span class="mf">1.53e-14</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>        <span class="o">-</span><span class="mf">0.574</span>      <span class="n">dx</span><span class="p">:</span>            <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>      <span class="mf">1.89e-17</span>      <span class="n">dx</span><span class="p">:</span>      <span class="mf">8.67e-09</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">x</span><span class="p">:</span>             <span class="mi">0</span>      <span class="n">dx</span><span class="p">:</span>      <span class="mf">5.94e-15</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">Inputs</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">ed</span>
      <span class="n">u</span><span class="p">:</span>             <span class="mi">0</span>
<span class="p">(</span><span class="mf">2.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">efd</span>
      <span class="n">u</span><span class="p">:</span>        <span class="mf">0.0272</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>
<span class="p">(</span><span class="mf">3.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="nb">eq</span>
      <span class="n">u</span><span class="p">:</span>             <span class="mi">0</span>
<span class="p">(</span><span class="mf">4.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">Tm</span>
      <span class="n">u</span><span class="p">:</span>          <span class="mf">1.04</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>

<span class="n">Outputs</span><span class="p">:</span> 
<span class="o">----------</span>
<span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">out2</span>
      <span class="n">y</span><span class="p">:</span>             <span class="mi">1</span>    <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="mf">2.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">out2</span>
      <span class="n">y</span><span class="p">:</span>      <span class="mf">1.67e-15</span>    <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mf">3.</span><span class="p">)</span> <span class="n">SymMtrSin8th</span><span class="p">/</span><span class="n">out2</span>
      <span class="n">y</span><span class="p">:</span>             <span class="mi">0</span>    <span class="p">[</span><span class="o">-</span><span class="nb">Inf</span> <span class="nb">Inf</span><span class="p">]</span>
</code></pre></div></div>

<p><strong>NOTA</strong> El c√≥digo de este apartado se encuentra en <code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\MySyncGnrt\model_ok_Junio2011_ok2021</code></p>

<h3 id="funciones-a-reutilizar-en-matlab">Funciones a reutilizar en matlab</h3>

<ul>
  <li>las condiciones iniciales se tienen en <code class="language-plaintext highlighter-rouge">\pc104\MTLB\bin\MyComputePrg\AsignCondIni</code></li>
  <li>modelado de las ecuaciones iniciales esta en <code class="language-plaintext highlighter-rouge">\pc104\MTLB\bin\MyComputePrg\AsynMach</code></li>
</ul>

<h3 id="maquina-sincrona">Maquina sincrona</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\bin\MyComputePrg\MtrSincr
</code></pre></div></div>

<h3 id="codigo-bueno-en-">Codigo bueno en ``</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\src
</code></pre></div></div>

<h3 id="last-update-control">Last update control</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\src\CTR
</code></pre></div></div>

<h2 id="par√°metros-de-la-m√°quina">Par√°metros de la m√°quina</h2>

<p><code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\StateStable</code></p>

<ul>
  <li>D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\StateStable_ok2021</li>
</ul>

<h3 id="inicializaci√≥n-de-la-m√°quina-sincrona">Inicializaci√≥n de la m√°quina sincrona</h3>

<p><code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\MySyncGnrt\model_ok_Junio2011</code></p>

<p>finalmente encontrado y operativo
<code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\MySyncGnrt\model_ok_Junio2011_ok2021</code></p>

<h3 id="dise√±o-del-sistema-de-control">Dise√±o del sistema de control</h3>

<p>revisar estos archivos
<code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\CheeMunOng</code></p>

<p>Este es el folder bueno que usamos para los italianos</p>

<p><code class="language-plaintext highlighter-rouge">D:\wk_matlab\uc3m\mt\pc104\MTLB\src\Motors\SYNgnrt\Kundur </code></p>

<h3 id="curva-de-capabilidad">Curva de capabilidad</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pc104\MTLB\src\capability
</code></pre></div></div>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">%% chech:OK:2015APRIL07</span>
<span class="c1">%CHECK:OK:18MAY2013</span>
<span class="nb">clear</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">close</span> <span class="nb">all</span><span class="p">;</span> <span class="nb">clc</span>

<span class="c1">%%Edicion to LateX</span>
<span class="c1">%{</span>
<span class="c1">% Configuracion para los graficos con formato en latex</span>
<span class="n">esq_bajo_izq</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">bajo_dib</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">ancho</span><span class="o">=</span><span class="mi">16</span><span class="p">;</span> <span class="n">altura</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span> 
<span class="n">Mposition</span><span class="o">=</span><span class="p">[</span><span class="n">esq_bajo_izq</span> <span class="n">bajo_dib</span> <span class="n">ancho</span> <span class="n">altura</span><span class="p">];</span> 
<span class="c1">%}</span>
<span class="n">iLocLeg</span><span class="o">=</span><span class="s1">'EastOutside'</span><span class="p">;</span>
<span class="n">ColorLine</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">];</span>
<span class="n">StyleLine</span><span class="o">=</span><span class="s1">'.-|--|-.|:'</span><span class="p">;</span>

<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'DefaultLineLineWidth'</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="k">...</span><span class="c">.</span>
        <span class="s1">'DefaultAxesColorOrder'</span><span class="p">,</span><span class="n">ColorLine</span><span class="p">,</span><span class="k">...</span>
      <span class="s1">'DefaultAxesLineStyleOrder'</span><span class="p">,</span><span class="n">StyleLine</span><span class="p">)</span>

<span class="n">iFontSize</span><span class="o">=</span><span class="mi">11</span><span class="p">;</span> <span class="n">iLineWidth</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span> <span class="n">jFontSize</span><span class="o">=</span><span class="mi">9</span><span class="p">;</span>
<span class="c1">%strFontName='Times';</span>
<span class="c1">%strFontName='Courier';</span>
<span class="c1">%strFontName='ArialBlack';</span>
<span class="c1">%strFontName='ModernNo.20';</span>
<span class="n">strFontName</span><span class="o">=</span><span class="s1">'Arial'</span><span class="p">;</span>

<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'Defaultaxesfontsize'</span><span class="p">,</span><span class="n">jFontSize</span><span class="p">,</span><span class="k">...</span>
    <span class="s1">'DefaultAxesFontName'</span><span class="p">,</span><span class="s1">'strFontName'</span><span class="p">,</span><span class="k">...</span>
<span class="s1">'DefaultAxesFontUnits'</span><span class="p">,</span><span class="s1">'centimeters'</span><span class="p">);</span>
<span class="c1">%'DefaultFontWeight','demi'</span>

<span class="c1">%--- colocar nombre en los ejes</span>
<span class="n">OBJ01</span><span class="o">=</span><span class="s1">'xlabel(strXlabel);ylabel(strYlabel)'</span><span class="p">;</span> 
<span class="k">...</span><span class="c"> tama√±o y tipo de letra en latex</span>
<span class="n">prop01</span><span class="o">=</span><span class="s1">'FontSize'</span><span class="p">;</span> <span class="n">prop02</span><span class="o">=</span><span class="s1">'Interpreter'</span><span class="p">;</span> <span class="n">INprop02</span><span class="o">=</span><span class="s1">'latex'</span><span class="p">;</span>
<span class="n">propA</span><span class="o">=</span><span class="s1">'XLabel'</span><span class="p">;</span> <span class="n">propB</span><span class="o">=</span><span class="s1">'YLabel'</span><span class="p">;</span>
<span class="n">OBJ02</span><span class="o">=</span><span class="s1">'set(get(gca,propA),prop01,iFontSize,prop02,INprop02)'</span><span class="p">;</span>
<span class="n">OBJ03</span><span class="o">=</span><span class="s1">'set(get(gca,propB),prop01,iFontSize,prop02,INprop02)'</span><span class="p">;</span>
<span class="c1">% ---&lt;/&gt;</span>

<span class="c1">%---- colocar legendas en graficas</span>
<span class="n">OBJ05</span><span class="o">=</span><span class="s1">'legend(strLegend)'</span><span class="p">;</span> <span class="n">propE</span><span class="o">=</span><span class="s1">'type'</span><span class="p">;</span>  <span class="n">propF</span><span class="o">=</span><span class="s1">'text'</span><span class="p">;</span>
<span class="n">OBJ06</span><span class="o">=</span><span class="s1">'set(findobj(lgOBJ,propE,propF),prop01,jFontSize,prop02,INprop02)'</span><span class="p">;</span>
<span class="k">...</span><span class="c"> color y localizacion de las etiquetas</span>
<span class="n">propG</span><span class="o">=</span><span class="s1">'boxoff'</span><span class="p">;</span> <span class="n">propH</span><span class="o">=</span><span class="s1">'Location'</span><span class="p">;</span> <span class="n">propI</span><span class="o">=</span><span class="s1">'edgecolor'</span><span class="p">;</span> <span class="n">propJ</span><span class="o">=</span><span class="s1">'none'</span><span class="p">;</span>
<span class="n">OBJ07</span><span class="o">=</span><span class="s1">'legend(propG,propH,iLocLeg,propI,propJ)'</span><span class="p">;</span> 

<span class="c1">%ConfigurationPlots</span>
<span class="n">bckGRIS</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">95</span> <span class="o">.</span><span class="mi">95</span> <span class="o">.</span><span class="mi">95</span><span class="p">];</span> <span class="n">co</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">5</span> <span class="o">.</span><span class="mi">4</span> <span class="o">.</span><span class="mi">3</span><span class="p">];</span> <span class="n">co01</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">5</span> <span class="o">.</span><span class="mi">5</span> <span class="o">.</span><span class="mi">5</span><span class="p">];</span> <span class="n">co02</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">7</span> <span class="o">.</span><span class="mi">7</span> <span class="o">.</span><span class="mi">7</span><span class="p">];</span>
<span class="n">posFIG</span><span class="o">=</span><span class="p">[</span><span class="mi">509</span><span class="p">,</span><span class="mi">1071</span><span class="p">,</span><span class="mi">791</span><span class="p">,</span><span class="mi">697</span><span class="p">];</span>
<span class="n">stfC</span><span class="o">=</span><span class="s1">'linewidth'</span><span class="p">;</span><span class="n">stfA</span><span class="o">=</span><span class="s1">'color'</span><span class="p">;</span>
<span class="c1">%% ConvensionGenerador</span>
<span class="c1">%% src:stevenson PAGE:98</span>

<span class="c1">%---axesTitles</span>
<span class="n">strXlabel</span><span class="o">=</span><span class="s1">'\bf{Potencia Activa P[p.u.]}'</span><span class="p">;</span>
<span class="n">strYlabel</span><span class="o">=</span><span class="s1">'\bf{(fp. en adelanto)|Potencia Reactiva Q[p.u.]|(fp en atraso)}'</span><span class="p">;</span>
<span class="n">strLgnd0</span><span class="o">=</span><span class="p">{</span><span class="s1">'L√≠mite Estabilidad'</span><span class="p">,</span><span class="s1">'L√≠mite de Armadura'</span><span class="p">,</span><span class="s1">'L√≠mite de Campo'</span><span class="p">};</span>
<span class="c1">%ylabel(strXlabel,'color','k','fontweight','b') </span>
<span class="c1">%xlabel(strYlabel,'color','k','fontweight','b');</span>
<span class="c1">%lead-adelanto  lag-delay</span>

<span class="c1">%---DefinitionFUNCTIONS</span>
<span class="n">ShwVls</span><span class="o">=@</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">in1</span><span class="p">,</span><span class="n">in2</span><span class="p">)</span><span class="nb">eval</span><span class="p">(</span><span class="s1">'disp(sprintf(str,in1,in2))'</span><span class="p">);</span>
<span class="n">LgndVls</span><span class="o">=@</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">vl</span><span class="p">)</span><span class="nb">eval</span><span class="p">(</span><span class="s1">'sprintf(str,vl)'</span><span class="p">);</span><span class="c1">%ValueLegendPlot</span>
<span class="n">strAlrm01</span><span class="o">=</span><span class="p">[</span><span class="s1">'abs(pf) this mus be &lt;= UNO'</span><span class="p">];</span>
<span class="c1">%ShwAlarm=@()eval('warndlg(strAlrm01,'error');')</span>
<span class="n">ShwRing</span><span class="o">=@</span><span class="p">()</span><span class="nb">eval</span><span class="p">(</span><span class="s1">'Fs=4096;w=1500;t=0:1/Fs:.15;y=sin(w*t);sound(y,Fs)'</span><span class="p">);</span>
<span class="c1">%...</span>
<span class="n">S_pk</span><span class="o">=@</span><span class="p">(</span><span class="n">Va_pk</span><span class="p">,</span><span class="n">Ia_pk</span><span class="p">)(</span><span class="n">Va_pk</span><span class="o">*</span><span class="n">Ia_pk</span><span class="p">);</span>
<span class="n">angPF</span><span class="o">=@</span><span class="p">(</span><span class="n">pf</span><span class="p">)(</span><span class="nb">acos</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">pf</span><span class="p">)));</span><span class="c1">%angleFactorPower</span>
<span class="n">toDGR</span><span class="o">=@</span><span class="p">(</span><span class="n">ang</span><span class="p">)(</span><span class="n">ang</span><span class="o">*</span><span class="mi">180</span><span class="p">/</span><span class="nb">pi</span><span class="p">);</span>
<span class="n">P_pk</span><span class="o">=@</span><span class="p">(</span><span class="n">S_pk</span><span class="p">,</span><span class="n">angPF</span><span class="p">)(</span><span class="n">S_pk</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">angPF</span><span class="p">));</span>
<span class="n">Q_pk</span><span class="o">=@</span><span class="p">(</span><span class="n">S_pk</span><span class="p">,</span><span class="n">angPF</span><span class="p">)(</span><span class="n">S_pk</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">angPF</span><span class="p">));</span>
<span class="n">P_fragm</span><span class="o">=@</span><span class="p">(</span><span class="n">Va</span><span class="p">,</span><span class="n">Uexc</span><span class="p">,</span><span class="n">Xs</span><span class="p">)(</span><span class="n">Va</span><span class="o">*</span><span class="n">Uexc</span><span class="p">/</span><span class="n">Xs</span><span class="p">);</span><span class="c1">%PwithoutANGDLTec:3.38</span>
<span class="n">Uexc</span><span class="o">=@</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">Xs</span><span class="p">,</span><span class="n">Va</span><span class="p">,</span><span class="n">angDLT</span><span class="p">)(</span><span class="n">P</span><span class="o">*</span><span class="n">Xs</span><span class="p">/(</span><span class="n">Va</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">angDLT</span><span class="p">)));</span><span class="c1">%fromEC:3.39</span>
<span class="n">cmplQ</span><span class="o">=@</span><span class="p">(</span><span class="n">Va</span><span class="p">,</span><span class="n">Xs</span><span class="p">)(</span><span class="n">Va</span><span class="o">^</span><span class="mi">2</span><span class="p">/</span><span class="n">Xs</span><span class="p">);</span><span class="c1">%termComplementaryEC:3.39CENTRORADIO</span>
<span class="n">angDLT</span><span class="o">=@</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">Q</span><span class="p">,</span><span class="n">cmplQ</span><span class="p">)(</span><span class="nb">atan</span><span class="p">(</span><span class="n">P</span><span class="p">/(</span><span class="n">Q</span><span class="o">+</span><span class="n">cmplQ</span><span class="p">)));</span><span class="c1">%fromEC:3.38</span>

<span class="c1">%% inputDATA</span>
<span class="c1">%[Va,pf,Ia,Xs]=deal(1,0.9,1,2.1);</span>
<span class="p">[</span><span class="n">Va</span><span class="p">,</span><span class="n">pf</span><span class="p">,</span><span class="n">Ia</span><span class="p">,</span><span class="n">Xs</span><span class="p">]</span><span class="o">=</span><span class="nb">deal</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
<span class="c1">%[Va,pf,Ia,Xs]=deal(1,0.99,1,1.05);%%%%%%%%OK</span>

<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">pf</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">,</span><span class="nb">warndlg</span><span class="p">(</span><span class="s1">'abs(pf)MUSTbe&lt;=UNO'</span><span class="p">,</span><span class="s1">'error'</span><span class="p">);</span><span class="n">ShwRing</span><span class="p">,</span><span class="k">break</span><span class="p">,</span><span class="k">end</span><span class="p">;</span>

<span class="n">A</span><span class="o">=</span><span class="n">S_pk</span><span class="p">(</span><span class="n">Va</span><span class="p">,</span><span class="n">Ia</span><span class="p">);</span> <span class="n">phio</span><span class="o">=</span><span class="n">angPF</span><span class="p">(</span><span class="n">pf</span><span class="p">);</span> <span class="n">pntB</span><span class="o">=</span><span class="n">cmplQ</span><span class="p">(</span><span class="n">Va</span><span class="p">,</span><span class="n">Xs</span><span class="p">);</span><span class="c1">%pointB-ejeY </span>

<span class="k">if</span> <span class="n">pf</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span> <span class="k">else</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="k">end</span>

<span class="p">[</span><span class="n">Po1</span><span class="p">,</span><span class="n">Qo1</span><span class="p">]</span><span class="o">=</span><span class="nb">deal</span><span class="p">(</span><span class="n">P_pk</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">phio</span><span class="p">),</span><span class="n">Q_pk</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">phio</span><span class="p">));</span>
<span class="n">str</span><span class="o">=</span><span class="s1">'%s:%5.3f'</span><span class="p">;</span> <span class="n">ShwVls</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="s1">'Po1'</span><span class="p">,</span><span class="n">Po1</span><span class="p">);</span> <span class="n">ShwVls</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="s1">'Qo1'</span><span class="p">,</span><span class="n">Qo1</span><span class="p">);</span>
<span class="n">deltao</span><span class="o">=</span><span class="n">angDLT</span><span class="p">(</span><span class="n">Po1</span><span class="p">,</span><span class="n">Qo1</span><span class="p">,</span><span class="n">pntB</span><span class="p">);</span> 
<span class="n">del1</span><span class="o">=</span><span class="n">toDGR</span><span class="p">(</span><span class="n">deltao</span><span class="p">);</span> 
<span class="n">gamo</span><span class="o">=</span><span class="nb">asin</span><span class="p">(</span><span class="n">pntB</span><span class="p">/</span><span class="n">A</span><span class="p">);</span>
<span class="n">phio01</span><span class="o">=</span><span class="n">s</span><span class="o">*</span><span class="n">toDGR</span><span class="p">(</span><span class="n">phio</span><span class="p">);</span> 
<span class="n">Ef1</span><span class="o">=</span><span class="n">Uexc</span><span class="p">(</span><span class="n">Po1</span><span class="p">,</span><span class="n">Xs</span><span class="p">,</span><span class="n">Va</span><span class="p">,</span><span class="n">deltao</span><span class="p">);</span> 

<span class="n">rCC</span><span class="o">=</span><span class="n">P_fragm</span><span class="p">(</span><span class="n">Va</span><span class="p">,</span><span class="n">Ef1</span><span class="p">,</span><span class="n">Xs</span><span class="p">);</span><span class="c1">%radioCurveCap </span>
<span class="n">bCC</span><span class="o">=-</span><span class="n">pntB</span><span class="p">;</span><span class="c1">%centroCurveCapability</span>
<span class="n">pntR</span><span class="o">=</span><span class="n">rCC</span><span class="o">+</span><span class="n">bCC</span><span class="p">;</span><span class="c1">%longitud del arco R</span>

<span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="c1">%pointOrigen</span>
<span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">Po1</span><span class="p">;</span><span class="c1">%pointQ</span>
<span class="n">pnt</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">pnt</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">Qo1</span><span class="p">;</span><span class="c1">%pointP</span>
<span class="n">pnt</span><span class="o">.</span><span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">pnt</span><span class="o">.</span><span class="n">N</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">bCC</span><span class="p">;</span><span class="c1">%pointP</span>
<span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="n">pntR</span><span class="p">;</span> <span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="n">bCC</span><span class="p">;</span><span class="c1">%crucePointM</span>

<span class="k">if</span> <span class="n">del1</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span> <span class="nb">warndlg</span><span class="p">(</span><span class="s1">'unstableConditions'</span><span class="p">,</span><span class="s1">'error'</span><span class="p">);</span><span class="n">ShwRing</span><span class="p">,</span><span class="k">break</span><span class="p">,</span> <span class="k">end</span><span class="p">;</span> 

<span class="n">tm</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> 
<span class="nb">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'Position'</span><span class="p">,</span><span class="n">posFIG</span><span class="p">);</span>

<span class="c1">%PlotPoints</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="s1">':k'</span><span class="p">);</span><span class="nb">hold</span> <span class="n">on</span><span class="p">;</span> 
<span class="nb">plot</span><span class="p">(</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="s1">'-'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co01</span><span class="p">);</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="s1">'--'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co02</span><span class="p">);</span>

<span class="nb">legend</span><span class="p">(</span><span class="n">strLgnd0</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="n">idx</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="c1">%ttlIDX=eval(ttl_idx); %eval(ttlOBJ);</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">OBJ01</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ02</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ03</span><span class="p">);</span>

  <span class="nb">disp</span> <span class="s1">'STEP 02: areaCapability'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span> 

<span class="nb">plot</span><span class="p">([</span><span class="mi">0</span> <span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">gamo</span><span class="p">)],[</span><span class="n">bCC</span> <span class="n">bCC</span><span class="p">],</span><span class="s1">':k'</span><span class="p">,</span><span class="n">stfC</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="c1">%LineStability</span>
<span class="c1">%(*1)</span>
<span class="n">phi</span><span class="o">=-</span><span class="n">gamo</span><span class="p">:</span><span class="mf">0.01</span><span class="p">:</span><span class="n">s</span><span class="o">*</span><span class="n">phio</span><span class="p">;</span>      <span class="n">x1</span><span class="o">=</span><span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">);</span>     <span class="n">x2</span><span class="o">=</span><span class="n">A</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">);</span><span class="c1">%Armature </span>
<span class="n">delta</span><span class="o">=</span><span class="nb">pi</span><span class="p">/</span><span class="mi">2</span><span class="o">-</span><span class="n">deltao</span><span class="p">:</span><span class="o">.</span><span class="mi">01</span><span class="p">:</span><span class="nb">pi</span><span class="p">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">y1</span><span class="o">=</span><span class="n">rCC</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">);</span> <span class="n">y2</span><span class="o">=</span><span class="n">rCC</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span><span class="o">+</span><span class="n">bCC</span><span class="p">;</span><span class="c1">%Field</span>
 <span class="nb">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">,</span><span class="s1">'-'</span><span class="p">,</span><span class="n">stfA</span><span class="p">,</span><span class="n">co01</span><span class="p">,</span><span class="n">stfC</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="c1">%Armature(S_pk &amp; phi) </span>
 <span class="nb">pause</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
 <span class="nb">plot</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="s1">'--'</span><span class="p">,</span><span class="n">stfA</span><span class="p">,</span><span class="n">co02</span><span class="p">,</span><span class="n">stfC</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="c1">%field(P_fragm &amp; delta &amp;cmplQ)</span>
 <span class="nb">pause</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">%--AreaSombreada </span>
<span class="n">a1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">gamo</span><span class="p">)</span> <span class="n">x1</span> <span class="n">y1</span> <span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">];</span><span class="c1">%x1-x2:vectores</span>
<span class="n">b1</span><span class="o">=</span><span class="p">[</span><span class="n">bCC</span><span class="o">+.</span><span class="mi">01</span> <span class="n">bCC</span><span class="o">+.</span><span class="mi">01</span> <span class="n">x2</span> <span class="n">y2</span> <span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">y</span><span class="p">];</span> <span class="nb">fill</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">b1</span><span class="p">,</span><span class="n">bckGRIS</span><span class="p">);</span>
<span class="c1">%-----------------</span>
<span class="nb">disp</span> <span class="s1">'STEP 03: middle &amp; horizontal'</span><span class="p">;</span><span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">);</span>
<span class="nb">plot</span><span class="p">([</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">],[</span><span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">R_b</span><span class="o">.</span><span class="n">y</span><span class="p">],</span><span class="s1">'-.k'</span><span class="p">,</span><span class="n">stfC</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> 
<span class="nb">plot</span><span class="p">([</span><span class="mi">0</span> <span class="mf">1.2</span><span class="o">*</span><span class="n">A</span><span class="p">],[</span><span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">O</span><span class="o">.</span><span class="n">y</span><span class="p">],</span><span class="s1">'-.k'</span><span class="p">,</span><span class="n">stfC</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="c1">%(S_pk)</span>

<span class="nb">disp</span> <span class="s1">'STEP 04: lines limit and text'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">);</span>
<span class="nb">plot</span><span class="p">([</span><span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">y</span><span class="p">],[</span><span class="n">bCC</span> <span class="n">Qo1</span><span class="p">],</span><span class="s1">'color'</span><span class="p">,</span><span class="n">bckGRIS</span><span class="p">);</span>
<span class="nb">plot</span><span class="p">([</span><span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">Q</span><span class="o">.</span><span class="n">y</span><span class="p">],[</span><span class="n">pnt</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">x</span> <span class="n">pnt</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">y</span><span class="p">],</span><span class="s1">'w'</span><span class="p">);</span><span class="c1">%(S_pk)%PConstant</span>
<span class="nb">plot</span><span class="p">([</span><span class="mi">0</span> <span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">gamo</span><span class="p">)],[</span><span class="n">pnt</span><span class="o">.</span><span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">pnt</span><span class="o">.</span><span class="n">N</span><span class="o">.</span><span class="n">y</span><span class="p">],</span><span class="s1">'color'</span><span class="p">,</span><span class="n">bckGRIS</span><span class="p">);</span><span class="c1">%(S_pk &amp; cmplQ,fragmP)</span>
<span class="c1">%</span>
<span class="c1">%-LegendPlots</span>
<span class="n">Qo</span><span class="o">=</span><span class="n">LgndVls</span><span class="p">(</span><span class="s1">'%5.3f'</span><span class="p">,</span><span class="n">Qo1</span><span class="p">);</span>        <span class="n">Po</span><span class="o">=</span><span class="n">LgndVls</span><span class="p">(</span><span class="s1">'%5.3f'</span><span class="p">,</span><span class="n">Po1</span><span class="p">)</span>
<span class="n">phio0</span><span class="o">=</span><span class="n">LgndVls</span><span class="p">(</span><span class="s1">'%5.2f'</span><span class="p">,</span><span class="n">phio01</span><span class="p">);</span>  <span class="n">del</span><span class="o">=</span><span class="n">LgndVls</span><span class="p">(</span><span class="s1">'%5.2f'</span><span class="p">,</span><span class="n">del1</span><span class="p">);</span>
<span class="n">Ef</span><span class="o">=</span><span class="n">LgndVls</span><span class="p">(</span><span class="s1">'%5.3f'</span><span class="p">,</span><span class="n">Ef1</span><span class="p">);</span>
<span class="c1">%....</span>
<span class="nb">text</span><span class="p">(</span><span class="n">Po1</span><span class="o">+.</span><span class="mi">1</span><span class="p">,</span><span class="n">Qo1</span><span class="o">+.</span><span class="mi">1</span><span class="p">,[</span><span class="s1">'Po='</span><span class="p">,</span><span class="n">Po</span><span class="p">,</span><span class="s1">' |\delta_o='</span><span class="p">,</span><span class="n">del</span><span class="p">],</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co</span><span class="p">,</span><span class="s1">'fontsize'</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
<span class="nb">text</span><span class="p">(</span><span class="n">Po1</span><span class="o">+.</span><span class="mi">1</span><span class="p">,</span><span class="n">Qo1</span><span class="p">,[</span><span class="s1">'Qo='</span><span class="p">,</span><span class="n">Qo</span><span class="p">,</span><span class="s1">' |\phi_o='</span><span class="p">,</span><span class="n">phio0</span><span class="p">],</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co</span><span class="p">,</span><span class="s1">'fontsize'</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
<span class="nb">text</span><span class="p">(</span><span class="n">Po1</span><span class="o">+.</span><span class="mi">2</span><span class="p">,</span><span class="n">Qo1</span><span class="o">-.</span><span class="mi">1</span><span class="p">,[</span><span class="s1">'Ef_o='</span><span class="p">,</span><span class="n">Ef</span><span class="p">],</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co</span><span class="p">,</span><span class="s1">'fontsize'</span><span class="p">,</span><span class="mi">12</span><span class="p">);</span>

<span class="nb">disp</span> <span class="s1">'STEP 06: MARK'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">);</span>

<span class="nb">plot</span><span class="p">(</span><span class="n">Po1</span><span class="p">,</span><span class="n">Qo1</span><span class="p">,</span><span class="s1">'or'</span><span class="p">,</span><span class="s1">'markersize'</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="s1">'markerfacecolor'</span><span class="p">,</span><span class="s1">'r'</span><span class="p">);</span><span class="c1">%(IaVd)</span>
<span class="nb">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">'*r'</span><span class="p">,</span><span class="s1">'markersize'</span><span class="p">,</span><span class="mi">9</span><span class="p">);</span> 
<span class="nb">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">bCC</span><span class="p">,</span><span class="s1">'*b'</span><span class="p">,</span><span class="s1">'markersize'</span><span class="p">,</span><span class="mi">9</span><span class="p">);</span><span class="c1">%rCC</span>

<span class="nb">disp</span> <span class="s1">'STEP 07: vector'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">);</span>
<span class="n">vecarrow</span><span class="p">([</span><span class="mi">0</span> <span class="n">bCC</span><span class="p">],[</span><span class="n">rCC</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="nb">pi</span><span class="p">/</span><span class="mi">2</span><span class="o">-</span><span class="n">deltao</span><span class="p">)</span> <span class="n">bCC</span><span class="o">+</span><span class="n">rCC</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="nb">pi</span><span class="p">/</span><span class="mi">2</span><span class="o">-</span><span class="n">deltao</span><span class="p">)],</span><span class="s1">'k'</span><span class="p">);</span><span class="c1">%Armature</span>
<span class="n">ksttng</span><span class="o">=</span><span class="mf">0.95</span><span class="p">;</span>
<span class="n">vecarrow</span><span class="p">([</span><span class="mi">0</span> <span class="mi">0</span><span class="p">],[</span><span class="n">ksttng</span><span class="o">*</span><span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">phio</span><span class="p">)</span> <span class="n">ksttng</span><span class="o">*</span><span class="n">A</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="n">phio</span><span class="p">)],</span><span class="s1">'k'</span><span class="p">);</span><span class="c1">%angle </span>

<span class="nb">disp</span> <span class="s1">'STEP 08: text'</span><span class="p">;</span><span class="nb">pause</span><span class="p">(</span><span class="n">tm</span><span class="p">);</span>
<span class="nb">text</span><span class="p">(</span><span class="mf">1.05</span><span class="o">*</span><span class="n">A</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">phio</span><span class="p">),</span><span class="mf">1.05</span><span class="o">*</span><span class="n">A</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="o">-</span><span class="n">phio</span><span class="p">),</span><span class="s1">'V_aI_a'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co01</span><span class="p">);</span>
<span class="nb">text</span><span class="p">(</span><span class="mf">1.05</span><span class="o">*</span><span class="n">rCC</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="mf">1.2</span><span class="p">),</span><span class="n">bCC</span><span class="o">+</span><span class="mf">1.03</span><span class="o">*</span><span class="n">rCC</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="mf">1.2</span><span class="p">),</span><span class="s1">'V_aE_f/X_s'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="n">co02</span><span class="p">);</span>
<span class="nb">text</span><span class="p">(</span><span class="mf">0.04</span><span class="p">,</span><span class="n">bCC</span><span class="o">+.</span><span class="mi">06</span><span class="p">,</span><span class="s1">'-V_a^2/X_s'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="s1">'k'</span><span class="p">);</span> 
<span class="nb">text</span><span class="p">(</span><span class="o">.</span><span class="mi">08</span><span class="p">,</span><span class="n">bCC</span><span class="o">+.</span><span class="mi">4</span><span class="p">,</span><span class="s1">'\delta_o'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="s1">'k'</span><span class="p">,</span><span class="s1">'fontsize'</span><span class="p">,</span><span class="mi">12</span><span class="p">);</span> 
<span class="nb">text</span><span class="p">(</span><span class="o">.</span><span class="mi">15</span><span class="p">,</span><span class="o">.</span><span class="mi">04</span><span class="p">,</span><span class="s1">'\phi_o'</span><span class="p">,</span><span class="s1">'color'</span><span class="p">,</span><span class="s1">'k'</span><span class="p">,</span><span class="s1">'fontsize'</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span><span class="nb">grid</span><span class="p">;</span>

<span class="nb">axis</span> <span class="n">equal</span><span class="p">;</span> <span class="nb">hold</span> <span class="n">off</span>   <span class="c1">%pause(5); close all</span>

<span class="c1">%Se genera el vector de puntos a partir del angulo </span>

<span class="c1">%{</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperPositionMode'</span><span class="p">,</span> <span class="s1">'manual'</span><span class="p">);</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperUnits'</span><span class="p">,</span> <span class="s1">'inches'</span><span class="p">);</span><span class="c1">%'centimeters'</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperPosition'</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span><span class="p">]);</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperType'</span><span class="p">,</span> <span class="s1">'A4'</span><span class="p">);</span>
<span class="c1">%B5-25*18cm</span>
<span class="c1">%A5-20.9*14.8</span>
<span class="c1">%B3-51*36</span>
<span class="c1">%A3</span>
<span class="c1">%'arch-A'-OKI</span>
<span class="c1">%set(gcf,'PaperOrientation','landscape');%{portrait} </span>
<span class="c1">%set(gcf, 'PaperType', );%OKI</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperPositionMode'</span><span class="p">,</span> <span class="s1">'auto'</span><span class="p">);</span><span class="s1">'manual'</span>   

<span class="nb">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="nb">plot</span><span class="p">(</span><span class="n">tout</span><span class="p">,</span><span class="n">Iabcn_rtr</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)/</span><span class="mi">13</span><span class="p">,</span><span class="s1">'k-'</span><span class="p">,</span><span class="n">tout</span><span class="p">,</span><span class="n">Iabcn_rtr</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)/</span><span class="mi">13</span><span class="p">,</span><span class="s1">'k:'</span><span class="p">,</span><span class="n">tout</span><span class="p">,</span><span class="n">Iabcn_rtr</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)/</span><span class="mi">13</span><span class="p">,</span><span class="s1">'k--'</span><span class="p">,</span><span class="s1">'LineWidth'</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="c1">%axis([t_ini t_fin -40 40]); </span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s1">'Time [s]'</span><span class="p">,</span><span class="s1">'FontSize'</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s1">'I_R current [pu]'</span><span class="p">,</span><span class="s1">'FontSize'</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>  
<span class="nb">legend</span><span class="p">(</span><span class="s1">'I_{Ra}'</span><span class="p">,</span><span class="s1">'I_{Rb}'</span><span class="p">,</span><span class="s1">'I_{Rc}'</span><span class="p">);</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gca</span><span class="p">,</span><span class="s1">'FontSize'</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="s1">'XTick'</span><span class="p">,[</span><span class="mi">1</span><span class="p">:</span><span class="mf">0.5</span><span class="p">:</span><span class="mf">3.5</span><span class="p">]);</span>
<span class="nb">grid</span><span class="p">;</span> <span class="nb">axis</span><span class="p">([</span><span class="mi">1</span> <span class="mf">3.5</span> <span class="o">-</span><span class="mi">7</span> <span class="mi">7</span><span class="p">]);</span> 
<span class="nb">print</span> <span class="o">-</span><span class="n">dpdf</span> <span class="s1">'test01.pdf'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="c1">% clf; close;</span>
<span class="nb">winopen</span><span class="p">(</span><span class="s1">'test01.pdf'</span><span class="p">)</span>
<span class="c1">%}</span>

<span class="c1">%% Tama√±o de la figura y posicion en el monitor</span>
<span class="c1">%---- function anonymous para el tama√±o del modelo</span>
<span class="c1">%{</span>
<span class="n">LBWH</span><span class="o">=@</span><span class="p">(</span><span class="n">LBobj</span><span class="p">,</span><span class="n">WHobj</span><span class="p">)</span> <span class="p">[</span><span class="n">LBobj</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">LBobj</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="k">...</span>
    <span class="n">WHobj</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">LBobj</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">WHobj</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">LBobj</span><span class="p">(</span><span class="mi">2</span><span class="p">)];</span>  
<span class="k">...</span><span class="c">[left bottom width height]    </span>
<span class="c1">%}</span>

<span class="c1">%% CONF. texto LATEX</span>
<span class="c1">%CnfigDfltPLOTS--archivo con lo anterior</span>
<span class="c1">%newDIR='D:\THESIS\CODE\plots_eps2pdf\';%forPRINT</span>
<span class="c1">%xo_lim=0; xe_lim=1.1;</span>


<span class="c1">%---</span>
<span class="c1">%{</span>
<span class="n">nmFIG01</span><span class="o">=</span><span class="s1">'test01'</span><span class="p">;</span> <span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'name'</span><span class="p">,</span><span class="n">nmFIG01</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'Units'</span><span class="p">,</span><span class="s1">'centimeters'</span><span class="p">)</span>
<span class="n">monitor_pos</span><span class="o">=</span><span class="nb">deal</span><span class="p">(</span><span class="nb">get</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'MonitorPosition'</span><span class="p">))</span>
<span class="k">...</span><span class="c">[left bottom width height] %get(gcf,'Position');   </span>
<span class="n">WHobj</span><span class="o">=</span><span class="p">[</span><span class="mi">672</span><span class="p">,</span><span class="mi">504</span><span class="p">];</span>  <span class="c1">% tama√±o figura deseado</span>
<span class="n">LBobj</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">999</span><span class="p">,</span><span class="mi">520</span><span class="p">];</span><span class="c1">% donde empieza el bloque</span>
<span class="n">pos_Mdl</span><span class="o">=</span><span class="n">LBWH</span><span class="p">(</span><span class="n">WHobj</span><span class="p">,</span><span class="n">LBobj</span><span class="p">)</span>
<span class="n">posIN</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">999</span> <span class="mi">680</span> <span class="mi">672</span> <span class="mi">504</span><span class="p">];</span><span class="c1">%[left bottom width height]</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'Position'</span><span class="p">,</span><span class="n">posIN</span><span class="p">)</span>
<span class="c1">%}</span>

<span class="c1">%--- Etiquetas para c/u de las legendas</span>
<span class="c1">%{</span>
<span class="n">NameTag</span><span class="o">=</span><span class="s1">'\bf{fp=}'</span><span class="p">;</span>  <span class="n">UnitTag</span><span class="o">=</span><span class="s1">''</span><span class="p">;</span>
<span class="n">obj_01</span><span class="o">=</span><span class="s1">'legend(strcat(NameTag,num2str(fp(1)),UnitTag),'</span><span class="p">;</span>
<span class="n">obj_02</span><span class="o">=</span><span class="s1">'strcat(NameTag,num2str(fp(2)),UnitTag),'</span><span class="p">;</span>
<span class="n">obj_03</span><span class="o">=</span><span class="s1">'strcat(NameTag,num2str(fp(3)),UnitTag),'</span><span class="p">;</span>
<span class="n">obj_04</span><span class="o">=</span><span class="s1">'strcat(NameTag,num2str(fp(4)),UnitTag))'</span><span class="p">;</span>
<span class="n">obj_</span><span class="o">=</span><span class="nb">strcat</span><span class="p">(</span><span class="n">obj_01</span><span class="p">,</span><span class="n">obj_02</span><span class="p">,</span><span class="n">obj_03</span><span class="p">,</span><span class="n">obj_04</span><span class="p">);</span>
<span class="c1">%--- Titulo para cada subfigura </span>
<span class="n">ttl_01</span><span class="o">=</span><span class="s1">'\alpha= '</span><span class="p">;</span><span class="n">ttl_02</span><span class="o">=</span><span class="s1">'¬∫'</span><span class="p">;</span> 
<span class="n">ttl_idx</span><span class="o">=</span><span class="s1">'num2str(alpha_values(idx))'</span><span class="p">;</span> 
<span class="n">ttlOBJ</span><span class="o">=</span><span class="s1">'title(strcat(ttl_01,ttlIDX,ttl_02))'</span><span class="p">;</span> 
<span class="c1">%----</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic1</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic2</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="k">...</span>
    <span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic3</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic4</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)));</span><span class="nb">grid</span> <span class="n">on</span>
<span class="n">idx</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">ttlIDX</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">ttl_idx</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ttlOBJ</span><span class="p">);</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">OBJ01</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ02</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ03</span><span class="p">);</span>
<span class="n">lgOBJ</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">obj_</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ06</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ07</span><span class="p">);</span>
<span class="nb">xlim</span><span class="p">([</span><span class="n">xo_lim</span> <span class="n">xe_lim</span><span class="p">]);</span> <span class="nb">ylim</span><span class="p">([</span><span class="mi">0</span> <span class="mf">10.9</span><span class="p">]);</span> 
<span class="c1">%---</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic1</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic2</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="k">...</span>
    <span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic3</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic4</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)));</span><span class="nb">grid</span>
<span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span> <span class="n">ttlIDX</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">ttl_idx</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ttlOBJ</span><span class="p">);</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">OBJ01</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ02</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ03</span><span class="p">);</span>
<span class="n">lgOBJ</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">obj_</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ06</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ07</span><span class="p">);</span>
<span class="nb">xlim</span><span class="p">([</span><span class="n">xo_lim</span> <span class="n">xe_lim</span><span class="p">]);</span> <span class="nb">ylim</span><span class="p">([</span><span class="mi">0</span> <span class="mf">10.9</span><span class="p">]);</span> 
<span class="c1">%---</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic1</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic2</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="k">...</span>
    <span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic3</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic4</span><span class="p">(:,</span><span class="mi">3</span><span class="p">)));</span><span class="nb">grid</span>
<span class="n">idx</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span> <span class="n">ttlIDX</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">ttl_idx</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ttlOBJ</span><span class="p">);</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">OBJ01</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ02</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ03</span><span class="p">);</span>
<span class="n">lgOBJ</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">obj_</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ06</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ07</span><span class="p">);</span>
<span class="nb">xlim</span><span class="p">([</span><span class="n">xo_lim</span> <span class="n">xe_lim</span><span class="p">]);</span> <span class="nb">ylim</span><span class="p">([</span><span class="mi">0</span> <span class="mf">10.9</span><span class="p">]);</span> 
<span class="c1">%---</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic1</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic2</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="k">...</span>
    <span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic3</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Vdip</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">Ic4</span><span class="p">(:,</span><span class="mi">4</span><span class="p">)));</span><span class="nb">grid</span>
<span class="n">idx</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span> <span class="n">ttlIDX</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">ttl_idx</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ttlOBJ</span><span class="p">);</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">OBJ01</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ02</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ03</span><span class="p">);</span>
<span class="n">lgOBJ</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">obj_</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ06</span><span class="p">);</span> <span class="nb">eval</span><span class="p">(</span><span class="n">OBJ07</span><span class="p">);</span>
<span class="nb">xlim</span><span class="p">([</span><span class="n">xo_lim</span> <span class="n">xe_lim</span><span class="p">]);</span> <span class="nb">ylim</span><span class="p">([</span><span class="mi">0</span> <span class="mf">10.9</span><span class="p">]);</span> 

<span class="k">...</span><span class="c"> COMENTADO PARA USARLO SOLO SI SE NECESITA</span>
<span class="c1">%print -dpdf  'D:\VirtualBox\Latex\Reportes\dfig\StatCom\fig\Paper080411_fig10.pdf'  </span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'PaperUnits'</span><span class="p">,</span><span class="s1">'centimeters'</span><span class="p">,</span> <span class="s1">'papersize'</span><span class="p">,[</span><span class="n">ancho</span> <span class="n">altura</span><span class="p">],</span><span class="s1">'paperposition'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="n">ancho</span> <span class="n">altura</span><span class="p">])</span>
<span class="n">nmfig</span><span class="o">=</span><span class="p">[</span><span class="n">newDIR</span><span class="p">,</span><span class="n">nmFIG01</span><span class="p">];</span>  <span class="nb">print</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'-deps'</span><span class="p">,</span> <span class="n">nmfig</span><span class="p">);</span>

<span class="c1">%print -dpdf Intensidad_sag_ang.pdf;  pause(1); clf; close;</span>
<span class="c1">%winopen  'Intensidad_sag_ang.pdf'</span>
<span class="c1">%print -depsc Intensidad_sag_ang.eps; % pause(1); clf; close;</span>
<span class="c1">%winopen  'Intensidad_sag_ang.eps'</span>
<span class="c1">%copyfile('Intensidad_sag_ang.eps',destine)</span>
<span class="c1">%pause(2); close all;</span>
<span class="c1">%}</span>

<span class="c1">%lgOBJ=eval(obj_); eval(OBJ06); eval(OBJ07);</span>

<span class="c1">%% Print</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'PaperUnits'</span><span class="p">,</span><span class="s1">'centimeters'</span><span class="p">,</span><span class="s1">'PaperOrientation'</span><span class="p">,</span><span class="s1">'landscape'</span><span class="p">,</span><span class="k">...</span>
    <span class="s1">'PaperType'</span><span class="p">,</span> <span class="s1">'A5'</span><span class="p">);</span>
<span class="n">pprsz</span><span class="o">=</span><span class="nb">get</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span> <span class="s1">'PaperSize'</span><span class="p">);</span>
<span class="p">[</span><span class="n">wdth</span> <span class="n">hght</span><span class="p">]</span><span class="o">=</span><span class="nb">deal</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mf">14.5</span><span class="p">);</span>
<span class="p">[</span><span class="n">lft</span><span class="p">,</span><span class="n">bttm</span><span class="p">]</span><span class="o">=</span><span class="nb">deal</span><span class="p">((</span><span class="n">pprsz</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">wdth</span><span class="p">)/</span><span class="mi">2</span><span class="p">,(</span><span class="n">pprsz</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">hght</span><span class="p">)/</span><span class="mi">2</span><span class="p">);</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'PaperPosition'</span><span class="p">,[</span><span class="n">lft</span><span class="p">,</span><span class="n">bttm</span><span class="p">,</span><span class="n">wdth</span><span class="p">,</span><span class="n">hght</span><span class="p">])</span>
<span class="nb">print</span> <span class="o">-</span><span class="n">dpdf</span> <span class="s1">'test01.pdf'</span><span class="p">;</span> <span class="nb">pause</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="c1">% clf; close;</span>
<span class="nb">winopen</span><span class="p">(</span><span class="s1">'test01.pdf'</span><span class="p">)</span>


</code></pre></div></div>

<p>[]:</p>

:ET